{"title":"系统加固-klsday12","uid":"6eebacce59e6873455fbd427aa546b9b","slug":"klsday12-安全加固","date":"2023-05-30T14:07:21.312Z","updated":"2023-06-01T12:29:20.851Z","comments":true,"path":"api/articles/klsday12-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-96vwgx.jpg","content":"<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531091244767.png\" alt=\"image-20230531091244767\"></p>\n<h2 id=\"理论讲解\"><a href=\"#理论讲解\" class=\"headerlink\" title=\"理论讲解\"></a>理论讲解</h2><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531091510931.png\" alt=\"image-20230531091510931\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531091519773.png\" alt=\"image-20230531091519773\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531091744048.png\" alt=\"image-20230531091744048\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531091820823.png\" alt=\"image-20230531091820823\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092005609.png\" alt=\"image-20230531092005609\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092107028.png\" alt=\"image-20230531092107028\"></p>\n<h2 id=\"Linux系统加固\"><a href=\"#Linux系统加固\" class=\"headerlink\" title=\"Linux系统加固\"></a>Linux系统加固</h2><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092230927.png\" alt=\"image-20230531092230927\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092234597.png\" alt=\"image-20230531092234597\"></p>\n<h3 id=\"账号管理与认证授权\"><a href=\"#账号管理与认证授权\" class=\"headerlink\" title=\"账号管理与认证授权\"></a>账号管理与认证授权</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092310314.png\" alt=\"image-20230531092310314\"></p>\n<h4 id=\"sudo\"><a href=\"#sudo\" class=\"headerlink\" title=\"sudo\"></a>sudo</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092558965.png\" alt=\"image-20230531092558965\"></p>\n<p>新建test用户</p>\n<p>useradd test</p>\n<p>passwd test</p>\n<p>su test</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531092844215.png\" alt=\"image-20230531092844215\"></p>\n<p>编辑sudoers文件</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531093228560.png\" alt=\"image-20230531093228560\"></p>\n<p>如果不想输入sudo密码可以修改成</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531093609599.png\" alt=\"image-20230531093609599\"></p>\n<p>再次尝试sudo新建用户</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531093540303.png\" alt=\"image-20230531093540303\"></p>\n<h4 id=\"检查高权限文件\"><a href=\"#检查高权限文件\" class=\"headerlink\" title=\"检查高权限文件\"></a>检查高权限文件</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531093748054.png\" alt=\"image-20230531093748054\"></p>\n<p><code>find / -type f \\( -perm -00007 \\) -a -ctime 1 | xargs -I &#123;&#125; ls -lh &#123;&#125;</code></p>\n<p><code>stat 文件名</code>:查看文件的时间信息</p>\n<h4 id=\"去除不需要的账号、修改默认账号shell环境\"><a href=\"#去除不需要的账号、修改默认账号shell环境\" class=\"headerlink\" title=\"去除不需要的账号、修改默认账号shell环境\"></a>去除不需要的账号、修改默认账号shell环境</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531094424619.png\" alt=\"image-20230531094424619\"></p>\n<h4 id=\"限制超级管理员远程登录\"><a href=\"#限制超级管理员远程登录\" class=\"headerlink\" title=\"限制超级管理员远程登录\"></a>限制超级管理员远程登录</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531094652927.png\" alt=\"image-20230531094652927\"></p>\n<p>如果这样设置了，那么之前设置的sudoer里面的kls2字段就应该设置成ALL，不然连不上</p>\n<h4 id=\"删除root以外UID为0的用户\"><a href=\"#删除root以外UID为0的用户\" class=\"headerlink\" title=\"删除root以外UID为0的用户\"></a>删除root以外UID为0的用户</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531095030356.png\" alt=\"image-20230531095030356\"></p>\n<p>uid为0的用户可以有多个</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531095225200.png\" alt=\"image-20230531095225200\"></p>\n<p>uid可以相同</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531095435390.png\" alt=\"image-20230531095435390\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531095428348.png\" alt=\"image-20230531095428348\"></p>\n<p><code>/var/log/secure</code> 记录了用户登录和认证相关的信息</p>\n<p><code>last</code>  用于显示系统中所有用户最近的登录信息，包括登录时间、注销时间和登录来源等等。</p>\n<p><code>lastb</code> 用于显示系统中所有用户最近的登录失败信息，包括登录失败的时间、登录来源和错误原因等等。</p>\n<h4 id=\"检查是否有账户获取过高权限\"><a href=\"#检查是否有账户获取过高权限\" class=\"headerlink\" title=\"检查是否有账户获取过高权限\"></a>检查是否有账户获取过高权限</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531095909246.png\" alt=\"image-20230531095909246\"></p>\n<p>第一句：确定当前系统当中的gid起始值</p>\n<p>第二句：找出uid大于等于1000的用户信息，再根据用户信息去&#x2F;etc&#x2F;group下找对应的组，一般应该是1000以上，重点关注1000以下的</p>\n<p>第三句：找出能登陆系统的用户，看看他们的gid有没有1000以下的</p>\n<h4 id=\"缩短默认密码生存周期\"><a href=\"#缩短默认密码生存周期\" class=\"headerlink\" title=\"缩短默认密码生存周期\"></a>缩短默认密码生存周期</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531101743742.png\" alt=\"image-20230531101743742\"></p>\n<h4 id=\"设置密码强度策略\"><a href=\"#设置密码强度策略\" class=\"headerlink\" title=\"设置密码强度策略\"></a>设置密码强度策略</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531101853784.png\" alt=\"image-20230531101853784\"></p>\n<p>dcredit&#x3D;-1 ：密码至少要包含一个数字</p>\n<p>lcredit&#x3D;-1 ：密码至少有个小写字母</p>\n<p>ucredit&#x3D;-1 ：密码至少有个大写字母</p>\n<p>ocredit&#x3D;-1 ：密码至少有个特殊字符</p>\n<p>minclass&#x3D;3 ：前面定义的这些配置至少要包含三种</p>\n<p>minlen&#x3D;8 ：密码最短8位</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531102400261.png\" alt=\"image-20230531102400261\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531102448798.png\" alt=\"image-20230531102448798\"></p>\n<p>直接<code>authconfig</code>回车可以看到使用说明</p>\n<h4 id=\"设置强制密码历史\"><a href=\"#设置强制密码历史\" class=\"headerlink\" title=\"设置强制密码历史\"></a>设置强制密码历史</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531102727391.png\" alt=\"image-20230531102727391\"></p>\n<h4 id=\"设置账户锁定策略\"><a href=\"#设置账户锁定策略\" class=\"headerlink\" title=\"设置账户锁定策略\"></a>设置账户锁定策略</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531102947548.png\" alt=\"image-20230531102947548\"></p>\n<p>查看指定用户尝试登陆失败次数:<code>pam_tally2 --user aby</code>，重置:<code>pam_tally2 --user aby --reset</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531103821184.png\" alt=\"image-20230531103821184\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531103808188.png\" alt=\"image-20230531103808188\"></p>\n<h4 id=\"设置关键目录的权限\"><a href=\"#设置关键目录的权限\" class=\"headerlink\" title=\"设置关键目录的权限\"></a>设置关键目录的权限</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531103922887.png\" alt=\"image-20230531103922887\"></p>\n<h4 id=\"修改umask值\"><a href=\"#修改umask值\" class=\"headerlink\" title=\"修改umask值\"></a>修改umask值</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531104243296.png\" alt=\"image-20230531104243296\"></p>\n<h4 id=\"限制硬件资源\"><a href=\"#限制硬件资源\" class=\"headerlink\" title=\"限制硬件资源\"></a>限制硬件资源</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531104423873.png\" alt=\"image-20230531104423873\"></p>\n<p>只针对用户做限制就在第一列*的位置加上用户名</p>\n<p>针对组就在第一列*位置加@组名</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531104819918.png\" alt=\"image-20230531104819918\"></p>\n<p>才会生效</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531105355531.png\" alt=\"image-20230531105355531\"></p>\n<h4 id=\"对用户使用ls、rm设置别名\"><a href=\"#对用户使用ls、rm设置别名\" class=\"headerlink\" title=\"对用户使用ls、rm设置别名\"></a>对用户使用ls、rm设置别名</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531105630493.png\" alt=\"image-20230531105630493\"></p>\n<h4 id=\"禁止任何人su为root账户\"><a href=\"#禁止任何人su为root账户\" class=\"headerlink\" title=\"禁止任何人su为root账户\"></a>禁止任何人su为root账户</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531105957379.png\" alt=\"image-20230531105957379\"></p>\n<p>这是centos6的修改方式</p>\n<p>7如下</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531110242989.png\" alt=\"image-20230531110242989\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531110351743.png\" alt=\"image-20230531110351743\"></p>\n<p>此时再想su切换回root需要：</p>\n<p><code>vim /etc/sudoers</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531110437388.png\" alt=\"image-20230531110437388\"></p>\n<p>再将这个用户添加到wheel组里</p>\n<p><code>gpasswd -a aby wheel</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531110625073.png\" alt=\"image-20230531110625073\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531110648458.png\" alt=\"image-20230531110648458\"></p>\n<h4 id=\"去掉所有SUID和SGID\"><a href=\"#去掉所有SUID和SGID\" class=\"headerlink\" title=\"去掉所有SUID和SGID\"></a>去掉所有SUID和SGID</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531111031928.png\" alt=\"image-20230531111031928\"></p>\n<p><code>find / -type f \\( -perm -04000 -o -perm 02000 \\) -exec ls -lg &#123;&#125; \\;</code></p>\n<h4 id=\"对开放目录设置粘滞位\"><a href=\"#对开放目录设置粘滞位\" class=\"headerlink\" title=\"对开放目录设置粘滞位\"></a>对开放目录设置粘滞位</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531111301385.png\" alt=\"image-20230531111301385\"></p>\n<h4 id=\"启用日志记录功能，使用日志服务器\"><a href=\"#启用日志记录功能，使用日志服务器\" class=\"headerlink\" title=\"启用日志记录功能，使用日志服务器\"></a>启用日志记录功能，使用日志服务器</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531133028232.png\" alt=\"image-20230531133028232\"></p>\n<p><strong>把本机的日志文件存放在另一台主机</strong></p>\n<p><code>vim /etc/rsyslog.conf</code></p>\n<p>添加这两行</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531134146017.png\" alt=\"image-20230531134146017\"></p>\n<p>打开另外一台主机的这个文件</p>\n<p>把这几行的注释去掉</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531134306967.png\" alt=\"image-20230531134306967\"></p>\n<p>加这行表示单独存放另一台主机的日志文件</p>\n<p><code>$template Remote,&quot;/var/log/%$YEAR%-%$MONTH%-%$DAY%/%fromhost-ip%.log&quot;</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531134608690.png\" alt=\"image-20230531134608690\"></p>\n<p>排除本地主机的ip记录，只记远程主机的</p>\n<p><code>:fromhost-ip, !isequal, &quot;127.0.0.1&quot; ?Remote</code></p>\n<p><code>&amp; stop</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531134902355.png\" alt=\"image-20230531134902355\"></p>\n<p>两边都重启日志服务</p>\n<p><code>systemctl restart rsyslog.service</code></p>\n<p>存放日志的主机：<code>cd /var/log</code> : 应该有对应的文件</p>\n<p>之前的主机：<code>logger xxxxxxxxxxx</code></p>\n<p>存放日志的主机：<code>tailf /var/log/xxx.xxx.xxx/x.x.x.x.log</code>，就可以看到日志</p>\n<h4 id=\"重要日志权限不应该高于640\"><a href=\"#重要日志权限不应该高于640\" class=\"headerlink\" title=\"重要日志权限不应该高于640\"></a>重要日志权限不应该高于640</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531140558975.png\" alt=\"image-20230531140558975\"></p>\n<h4 id=\"设置关键文件底层属性\"><a href=\"#设置关键文件底层属性\" class=\"headerlink\" title=\"设置关键文件底层属性\"></a>设置关键文件底层属性</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531140849261.png\" alt=\"image-20230531140849261\"></p>\n<h3 id=\"通讯协议\"><a href=\"#通讯协议\" class=\"headerlink\" title=\"通讯协议\"></a>通讯协议</h3><h4 id=\"关闭非加密远程管理telnet\"><a href=\"#关闭非加密远程管理telnet\" class=\"headerlink\" title=\"关闭非加密远程管理telnet\"></a>关闭非加密远程管理telnet</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531141257782.png\" alt=\"image-20230531141257782\"></p>\n<h4 id=\"使用加密的远程管理ssh\"><a href=\"#使用加密的远程管理ssh\" class=\"headerlink\" title=\"使用加密的远程管理ssh\"></a>使用加密的远程管理ssh</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531141434906.png\" alt=\"image-20230531141434906\"></p>\n<p><code>systemctl restart sshd</code></p>\n<p><code>ssh -p 22222 root@192.168.235.136</code></p>\n<h4 id=\"设置访问控制列表\"><a href=\"#设置访问控制列表\" class=\"headerlink\" title=\"设置访问控制列表\"></a>设置访问控制列表</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531142058893.png\" alt=\"image-20230531142058893\"></p>\n<p>ppt的意思是拒绝所有的连接只允许白名单的IP连接</p>\n<p>不让192.168.1.100通过ssh连接</p>\n<p><code>iptables -A INPUT -p tcp --dport 22 -s 192.168.1.100 -j DROP</code></p>\n<h4 id=\"固化常用DNS解析\"><a href=\"#固化常用DNS解析\" class=\"headerlink\" title=\"固化常用DNS解析\"></a>固化常用DNS解析</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531144558807.png\" alt=\"image-20230531144558807\"></p>\n<h4 id=\"打开syncookie\"><a href=\"#打开syncookie\" class=\"headerlink\" title=\"打开syncookie\"></a>打开syncookie</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531144627435.png\" alt=\"image-20230531144627435\"></p>\n<h4 id=\"不响应ICMP请求\"><a href=\"#不响应ICMP请求\" class=\"headerlink\" title=\"不响应ICMP请求\"></a>不响应ICMP请求</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145018902.png\" alt=\"image-20230531145018902\"></p>\n<p>弄完以后要<code>sysctl -p</code></p>\n<h4 id=\"禁止处理无源路由\"><a href=\"#禁止处理无源路由\" class=\"headerlink\" title=\"禁止处理无源路由\"></a>禁止处理无源路由</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145235246.png\" alt=\"image-20230531145235246\"></p>\n<h4 id=\"修改半连接上限\"><a href=\"#修改半连接上限\" class=\"headerlink\" title=\"修改半连接上限\"></a>修改半连接上限</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145437365.png\" alt=\"image-20230531145437365\"></p>\n<h4 id=\"FTP使用黑白名单限制\"><a href=\"#FTP使用黑白名单限制\" class=\"headerlink\" title=\"FTP使用黑白名单限制\"></a>FTP使用黑白名单限制</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145614897.png\" alt=\"image-20230531145614897\"></p>\n<h4 id=\"FTP设置上传文件后的默认权限\"><a href=\"#FTP设置上传文件后的默认权限\" class=\"headerlink\" title=\"FTP设置上传文件后的默认权限\"></a>FTP设置上传文件后的默认权限</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145808585.png\" alt=\"image-20230531145808585\"></p>\n<h4 id=\"FTP设置banner信息\"><a href=\"#FTP设置banner信息\" class=\"headerlink\" title=\"FTP设置banner信息\"></a>FTP设置banner信息</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145839323.png\" alt=\"image-20230531145839323\"></p>\n<h4 id=\"配置可信任的NTP服务器\"><a href=\"#配置可信任的NTP服务器\" class=\"headerlink\" title=\"配置可信任的NTP服务器\"></a>配置可信任的NTP服务器</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531145916097.png\" alt=\"image-20230531145916097\"></p>\n<h4 id=\"检查账户目录中是否存在高危文件-netrc-rhosts\"><a href=\"#检查账户目录中是否存在高危文件-netrc-rhosts\" class=\"headerlink\" title=\"检查账户目录中是否存在高危文件.netrc .rhosts\"></a>检查账户目录中是否存在高危文件.netrc .rhosts</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531150051066.png\" alt=\"image-20230531150051066\"></p>\n<h4 id=\"关闭NFS服务\"><a href=\"#关闭NFS服务\" class=\"headerlink\" title=\"关闭NFS服务\"></a>关闭NFS服务</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531150832259.png\" alt=\"image-20230531150832259\"></p>\n<h3 id=\"补丁管理\"><a href=\"#补丁管理\" class=\"headerlink\" title=\"补丁管理\"></a>补丁管理</h3><h4 id=\"补丁装载\"><a href=\"#补丁装载\" class=\"headerlink\" title=\"补丁装载\"></a>补丁装载</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531150623378.png\" alt=\"image-20230531150623378\"></p>\n<h3 id=\"服务进程与启动\"><a href=\"#服务进程与启动\" class=\"headerlink\" title=\"服务进程与启动\"></a>服务进程与启动</h3><h4 id=\"关闭无用服务\"><a href=\"#关闭无用服务\" class=\"headerlink\" title=\"关闭无用服务\"></a>关闭无用服务</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531151039595.png\" alt=\"image-20230531151039595\"></p>\n<h4 id=\"建议关闭的服务\"><a href=\"#建议关闭的服务\" class=\"headerlink\" title=\"建议关闭的服务\"></a>建议关闭的服务</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531151221474.png\" alt=\"image-20230531151221474\"></p>\n<h3 id=\"banner与自动注销\"><a href=\"#banner与自动注销\" class=\"headerlink\" title=\"banner与自动注销\"></a>banner与自动注销</h3><h4 id=\"隐藏系统提示信息\"><a href=\"#隐藏系统提示信息\" class=\"headerlink\" title=\"隐藏系统提示信息\"></a>隐藏系统提示信息</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531151343768.png\" alt=\"image-20230531151343768\"></p>\n<h4 id=\"设置登陆超时注销\"><a href=\"#设置登陆超时注销\" class=\"headerlink\" title=\"设置登陆超时注销\"></a>设置登陆超时注销</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531151505565.png\" alt=\"image-20230531151505565\"></p>\n<p>没找到HISTFILESIZE这个字段可以在文本末尾加TMOUT&#x3D;180</p>\n<h4 id=\"减少history历史数量\"><a href=\"#减少history历史数量\" class=\"headerlink\" title=\"减少history历史数量\"></a>减少history历史数量</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531151943551.png\" alt=\"image-20230531151943551\"></p>\n<p><code>history -c</code> 清空历史记录</p>\n<h4 id=\"跳过grub菜单\"><a href=\"#跳过grub菜单\" class=\"headerlink\" title=\"跳过grub菜单\"></a>跳过grub菜单</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531152322638.png\" alt=\"image-20230531152322638\"></p>\n<h4 id=\"关闭ctrl-alt-del重启功能\"><a href=\"#关闭ctrl-alt-del重启功能\" class=\"headerlink\" title=\"关闭ctrl+alt+del重启功能\"></a>关闭ctrl+alt+del重启功能</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531152906043.png\" alt=\"image-20230531152906043\"></p>\n<p><code>init q</code> 使其生效</p>\n<h2 id=\"Windows系统加固\"><a href=\"#Windows系统加固\" class=\"headerlink\" title=\"Windows系统加固\"></a>Windows系统加固</h2><h3 id=\"账号管理与认证授权-1\"><a href=\"#账号管理与认证授权-1\" class=\"headerlink\" title=\"账号管理与认证授权\"></a>账号管理与认证授权</h3><h4 id=\"按用户类型分配账号\"><a href=\"#按用户类型分配账号\" class=\"headerlink\" title=\"按用户类型分配账号\"></a>按用户类型分配账号</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531154657430.png\" alt=\"image-20230531154657430\"></p>\n<p>我的电脑&#x3D;&#x3D;》管理&#x3D;&#x3D;》本地用户和组</p>\n<p>或者cmd输入<code>lusrmgr.msc</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230531155059964.png\" alt=\"image-20230531155059964\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601090440164.png\" alt=\"image-20230601090440164\"></p>\n<p>再次页面右键可以创建新用户</p>\n<p>右键新建用户&#x3D;&#x3D;》右击用户&#x3D;&#x3D;》属于&#x3D;&#x3D;》隶属于&#x3D;&#x3D;》添加&#x3D;&#x3D;》高级&#x3D;&#x3D;》立即查找     # 即可添加</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601090728150.png\" alt=\"image-20230601090728150\"></p>\n<h4 id=\"清理系统无用账户\"><a href=\"#清理系统无用账户\" class=\"headerlink\" title=\"清理系统无用账户\"></a>清理系统无用账户</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601090851668.png\" alt=\"image-20230601090851668\"></p>\n<h4 id=\"重命名管理员，禁用guest\"><a href=\"#重命名管理员，禁用guest\" class=\"headerlink\" title=\"重命名管理员，禁用guest\"></a>重命名管理员，禁用guest</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601091307185.png\" alt=\"image-20230601091307185\"></p>\n<h4 id=\"设置密码策略\"><a href=\"#设置密码策略\" class=\"headerlink\" title=\"设置密码策略\"></a>设置密码策略</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601091435701.png\" alt=\"image-20230601091435701\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601091832833.png\" alt=\"image-20230601091832833\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601091524749.png\" alt=\"image-20230601091524749\"></p>\n<h4 id=\"设定账户锁定策略\"><a href=\"#设定账户锁定策略\" class=\"headerlink\" title=\"设定账户锁定策略\"></a>设定账户锁定策略</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601091904068.png\" alt=\"image-20230601091904068\"></p>\n<h4 id=\"远程关机权限设置\"><a href=\"#远程关机权限设置\" class=\"headerlink\" title=\"远程关机权限设置\"></a>远程关机权限设置</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092002111.png\" alt=\"image-20230601092002111\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092037834.png\" alt=\"image-20230601092037834\"></p>\n<h4 id=\"本地关闭系统设置\"><a href=\"#本地关闭系统设置\" class=\"headerlink\" title=\"本地关闭系统设置\"></a>本地关闭系统设置</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092128540.png\" alt=\"image-20230601092128540\"></p>\n<h4 id=\"取得文件或对象所有权设置\"><a href=\"#取得文件或对象所有权设置\" class=\"headerlink\" title=\"取得文件或对象所有权设置\"></a>取得文件或对象所有权设置</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092335078.png\" alt=\"image-20230601092335078\"></p>\n<h4 id=\"设置从本地登陆此计算机\"><a href=\"#设置从本地登陆此计算机\" class=\"headerlink\" title=\"设置从本地登陆此计算机\"></a>设置从本地登陆此计算机</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092443804.png\" alt=\"image-20230601092443804\"></p>\n<h4 id=\"设置从网络访问此计算机\"><a href=\"#设置从网络访问此计算机\" class=\"headerlink\" title=\"设置从网络访问此计算机\"></a>设置从网络访问此计算机</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092452146.png\" alt=\"image-20230601092452146\"></p>\n<h3 id=\"日志配置\"><a href=\"#日志配置\" class=\"headerlink\" title=\"日志配置\"></a>日志配置</h3><h4 id=\"审核策略设置\"><a href=\"#审核策略设置\" class=\"headerlink\" title=\"审核策略设置\"></a>审核策略设置</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092812715.png\" alt=\"image-20230601092812715\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601092844818.png\" alt=\"image-20230601092844818\"></p>\n<h4 id=\"日志记录策略设置\"><a href=\"#日志记录策略设置\" class=\"headerlink\" title=\"日志记录策略设置\"></a>日志记录策略设置</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601093043611.png\" alt=\"image-20230601093043611\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601093255940.png\" alt=\"image-20230601093255940\"></p>\n<h3 id=\"IP协议安全\"><a href=\"#IP协议安全\" class=\"headerlink\" title=\"IP协议安全\"></a>IP协议安全</h3><h4 id=\"启用TCP-x2F-IP筛选\"><a href=\"#启用TCP-x2F-IP筛选\" class=\"headerlink\" title=\"启用TCP&#x2F;IP筛选\"></a>启用TCP&#x2F;IP筛选</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601094124401.png\" alt=\"image-20230601094124401\"></p>\n<h4 id=\"开启系统防火墙\"><a href=\"#开启系统防火墙\" class=\"headerlink\" title=\"开启系统防火墙\"></a>开启系统防火墙</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601094318178.png\" alt=\"image-20230601094318178\"></p>\n<h4 id=\"设置空闲超时锁定系统\"><a href=\"#设置空闲超时锁定系统\" class=\"headerlink\" title=\"设置空闲超时锁定系统\"></a>设置空闲超时锁定系统</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601094446487.png\" alt=\"image-20230601094446487\"></p>\n<h4 id=\"设置网路服务挂起时间\"><a href=\"#设置网路服务挂起时间\" class=\"headerlink\" title=\"设置网路服务挂起时间\"></a>设置网路服务挂起时间</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601094601694.png\" alt=\"image-20230601094601694\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">net share c$ &#x2F;delete\n\nnet share ipc$ &#x2F;delete\nnet share admin$ &#x2F;delete\nnet share c$ &#x2F;delete\nnet share d$ &#x2F;delete\nnet share e$ &#x2F;delete\nnet share f$ &#x2F;delete</code></pre>\n\n<h4 id=\"关闭默认共享\"><a href=\"#关闭默认共享\" class=\"headerlink\" title=\"关闭默认共享\"></a>关闭默认共享</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601095033001.png\" alt=\"image-20230601095033001\"></p>\n<h4 id=\"设置共享文件夹权限\"><a href=\"#设置共享文件夹权限\" class=\"headerlink\" title=\"设置共享文件夹权限\"></a>设置共享文件夹权限</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601095228521.png\" alt=\"image-20230601095228521\"></p>\n<h3 id=\"漏洞管理\"><a href=\"#漏洞管理\" class=\"headerlink\" title=\"漏洞管理\"></a>漏洞管理</h3><h4 id=\"安全系统补丁\"><a href=\"#安全系统补丁\" class=\"headerlink\" title=\"安全系统补丁\"></a>安全系统补丁</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601095632247.png\" alt=\"image-20230601095632247\"></p>\n<h4 id=\"安装和更新杀毒软件\"><a href=\"#安装和更新杀毒软件\" class=\"headerlink\" title=\"安装和更新杀毒软件\"></a>安装和更新杀毒软件</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601095855226.png\" alt=\"image-20230601095855226\"></p>\n<h3 id=\"Windows服务\"><a href=\"#Windows服务\" class=\"headerlink\" title=\"Windows服务\"></a>Windows服务</h3><h4 id=\"关闭无用服务-1\"><a href=\"#关闭无用服务-1\" class=\"headerlink\" title=\"关闭无用服务\"></a>关闭无用服务</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601095940978.png\" alt=\"image-20230601095940978\"></p>\n<h4 id=\"默认启动选项\"><a href=\"#默认启动选项\" class=\"headerlink\" title=\"默认启动选项\"></a>默认启动选项</h4><p>cmd钟输入<code>msconfig</code> 设置Windows默认启动选项</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601100145306.png\" alt=\"image-20230601100145306\"></p>\n<h4 id=\"关闭无用自启动项\"><a href=\"#关闭无用自启动项\" class=\"headerlink\" title=\"关闭无用自启动项\"></a>关闭无用自启动项</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601100630901.png\" alt=\"image-20230601100630901\"></p>\n<h4 id=\"关闭windows自动播放功能\"><a href=\"#关闭windows自动播放功能\" class=\"headerlink\" title=\"关闭windows自动播放功能\"></a>关闭windows自动播放功能</h4><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601100540821.png\" alt=\"image-20230601100540821\"></p>\n","text":" 理论讲解 Linux系统加固 账号管理与认证授权 sudo 新建test用户 useradd test passwd test su test 编辑sudoers文件 如果不想输入sudo密码可以修改成 再次尝试sudo新建用户 检查高权限文件 find / -type f \\...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3\"><span class=\"toc-text\">理论讲解</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Linux%E7%B3%BB%E7%BB%9F%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">Linux系统加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B4%A6%E5%8F%B7%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83\"><span class=\"toc-text\">账号管理与认证授权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#sudo\"><span class=\"toc-text\">sudo</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5%E9%AB%98%E6%9D%83%E9%99%90%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">检查高权限文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8E%BB%E9%99%A4%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E8%B4%A6%E5%8F%B7%E3%80%81%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%B4%A6%E5%8F%B7shell%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">去除不需要的账号、修改默认账号shell环境</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E5%91%98%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">限制超级管理员远程登录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4root%E4%BB%A5%E5%A4%96UID%E4%B8%BA0%E7%9A%84%E7%94%A8%E6%88%B7\"><span class=\"toc-text\">删除root以外UID为0的用户</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%9C%89%E8%B4%A6%E6%88%B7%E8%8E%B7%E5%8F%96%E8%BF%87%E9%AB%98%E6%9D%83%E9%99%90\"><span class=\"toc-text\">检查是否有账户获取过高权限</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%BC%A9%E7%9F%AD%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81%E7%94%9F%E5%AD%98%E5%91%A8%E6%9C%9F\"><span class=\"toc-text\">缩短默认密码生存周期</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E5%BC%BA%E5%BA%A6%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">设置密码强度策略</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%BC%BA%E5%88%B6%E5%AF%86%E7%A0%81%E5%8E%86%E5%8F%B2\"><span class=\"toc-text\">设置强制密码历史</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E8%B4%A6%E6%88%B7%E9%94%81%E5%AE%9A%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">设置账户锁定策略</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%85%B3%E9%94%AE%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%83%E9%99%90\"><span class=\"toc-text\">设置关键目录的权限</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9umask%E5%80%BC\"><span class=\"toc-text\">修改umask值</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E7%A1%AC%E4%BB%B6%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">限制硬件资源</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AF%B9%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8ls%E3%80%81rm%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8D\"><span class=\"toc-text\">对用户使用ls、rm设置别名</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E4%BB%BB%E4%BD%95%E4%BA%BAsu%E4%B8%BAroot%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">禁止任何人su为root账户</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8E%BB%E6%8E%89%E6%89%80%E6%9C%89SUID%E5%92%8CSGID\"><span class=\"toc-text\">去掉所有SUID和SGID</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AF%B9%E5%BC%80%E6%94%BE%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE%E7%B2%98%E6%BB%9E%E4%BD%8D\"><span class=\"toc-text\">对开放目录设置粘滞位</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%90%AF%E7%94%A8%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">启用日志记录功能，使用日志服务器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E8%A6%81%E6%97%A5%E5%BF%97%E6%9D%83%E9%99%90%E4%B8%8D%E5%BA%94%E8%AF%A5%E9%AB%98%E4%BA%8E640\"><span class=\"toc-text\">重要日志权限不应该高于640</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%85%B3%E9%94%AE%E6%96%87%E4%BB%B6%E5%BA%95%E5%B1%82%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">设置关键文件底层属性</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE\"><span class=\"toc-text\">通讯协议</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E9%9D%9E%E5%8A%A0%E5%AF%86%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86telnet\"><span class=\"toc-text\">关闭非加密远程管理telnet</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%8A%A0%E5%AF%86%E7%9A%84%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86ssh\"><span class=\"toc-text\">使用加密的远程管理ssh</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8\"><span class=\"toc-text\">设置访问控制列表</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9B%BA%E5%8C%96%E5%B8%B8%E7%94%A8DNS%E8%A7%A3%E6%9E%90\"><span class=\"toc-text\">固化常用DNS解析</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%BC%80syncookie\"><span class=\"toc-text\">打开syncookie</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%93%8D%E5%BA%94ICMP%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">不响应ICMP请求</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E5%A4%84%E7%90%86%E6%97%A0%E6%BA%90%E8%B7%AF%E7%94%B1\"><span class=\"toc-text\">禁止处理无源路由</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%8D%8A%E8%BF%9E%E6%8E%A5%E4%B8%8A%E9%99%90\"><span class=\"toc-text\">修改半连接上限</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#FTP%E4%BD%BF%E7%94%A8%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95%E9%99%90%E5%88%B6\"><span class=\"toc-text\">FTP使用黑白名单限制</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#FTP%E8%AE%BE%E7%BD%AE%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%90%8E%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90\"><span class=\"toc-text\">FTP设置上传文件后的默认权限</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#FTP%E8%AE%BE%E7%BD%AEbanner%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">FTP设置banner信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BF%A1%E4%BB%BB%E7%9A%84NTP%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">配置可信任的NTP服务器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5%E8%B4%A6%E6%88%B7%E7%9B%AE%E5%BD%95%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E9%AB%98%E5%8D%B1%E6%96%87%E4%BB%B6-netrc-rhosts\"><span class=\"toc-text\">检查账户目录中是否存在高危文件.netrc .rhosts</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%ADNFS%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">关闭NFS服务</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A1%A5%E4%B8%81%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">补丁管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%A1%A5%E4%B8%81%E8%A3%85%E8%BD%BD\"><span class=\"toc-text\">补丁装载</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">服务进程与启动</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E6%97%A0%E7%94%A8%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">关闭无用服务</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BB%BA%E8%AE%AE%E5%85%B3%E9%97%AD%E7%9A%84%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">建议关闭的服务</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#banner%E4%B8%8E%E8%87%AA%E5%8A%A8%E6%B3%A8%E9%94%80\"><span class=\"toc-text\">banner与自动注销</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%9A%90%E8%97%8F%E7%B3%BB%E7%BB%9F%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">隐藏系统提示信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E7%99%BB%E9%99%86%E8%B6%85%E6%97%B6%E6%B3%A8%E9%94%80\"><span class=\"toc-text\">设置登陆超时注销</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%87%8F%E5%B0%91history%E5%8E%86%E5%8F%B2%E6%95%B0%E9%87%8F\"><span class=\"toc-text\">减少history历史数量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%B7%B3%E8%BF%87grub%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">跳过grub菜单</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%ADctrl-alt-del%E9%87%8D%E5%90%AF%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">关闭ctrl+alt+del重启功能</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Windows%E7%B3%BB%E7%BB%9F%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">Windows系统加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B4%A6%E5%8F%B7%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83-1\"><span class=\"toc-text\">账号管理与认证授权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8C%89%E7%94%A8%E6%88%B7%E7%B1%BB%E5%9E%8B%E5%88%86%E9%85%8D%E8%B4%A6%E5%8F%B7\"><span class=\"toc-text\">按用户类型分配账号</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%E6%97%A0%E7%94%A8%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">清理系统无用账户</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%91%BD%E5%90%8D%E7%AE%A1%E7%90%86%E5%91%98%EF%BC%8C%E7%A6%81%E7%94%A8guest\"><span class=\"toc-text\">重命名管理员，禁用guest</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">设置密码策略</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E5%AE%9A%E8%B4%A6%E6%88%B7%E9%94%81%E5%AE%9A%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">设定账户锁定策略</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%BF%9C%E7%A8%8B%E5%85%B3%E6%9C%BA%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">远程关机权限设置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9C%AC%E5%9C%B0%E5%85%B3%E9%97%AD%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">本地关闭系统设置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%96%E5%BE%97%E6%96%87%E4%BB%B6%E6%88%96%E5%AF%B9%E8%B1%A1%E6%89%80%E6%9C%89%E6%9D%83%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">取得文件或对象所有权设置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E4%BB%8E%E6%9C%AC%E5%9C%B0%E7%99%BB%E9%99%86%E6%AD%A4%E8%AE%A1%E7%AE%97%E6%9C%BA\"><span class=\"toc-text\">设置从本地登陆此计算机</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E4%BB%8E%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE%E6%AD%A4%E8%AE%A1%E7%AE%97%E6%9C%BA\"><span class=\"toc-text\">设置从网络访问此计算机</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">日志配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%A1%E6%A0%B8%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">审核策略设置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">日志记录策略设置</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#IP%E5%8D%8F%E8%AE%AE%E5%AE%89%E5%85%A8\"><span class=\"toc-text\">IP协议安全</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%90%AF%E7%94%A8TCP-x2F-IP%E7%AD%9B%E9%80%89\"><span class=\"toc-text\">启用TCP&#x2F;IP筛选</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AF%E7%B3%BB%E7%BB%9F%E9%98%B2%E7%81%AB%E5%A2%99\"><span class=\"toc-text\">开启系统防火墙</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E7%A9%BA%E9%97%B2%E8%B6%85%E6%97%B6%E9%94%81%E5%AE%9A%E7%B3%BB%E7%BB%9F\"><span class=\"toc-text\">设置空闲超时锁定系统</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E7%BD%91%E8%B7%AF%E6%9C%8D%E5%8A%A1%E6%8C%82%E8%B5%B7%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">设置网路服务挂起时间</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E9%BB%98%E8%AE%A4%E5%85%B1%E4%BA%AB\"><span class=\"toc-text\">关闭默认共享</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9D%83%E9%99%90\"><span class=\"toc-text\">设置共享文件夹权限</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%BC%8F%E6%B4%9E%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">漏洞管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E5%85%A8%E7%B3%BB%E7%BB%9F%E8%A1%A5%E4%B8%81\"><span class=\"toc-text\">安全系统补丁</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E5%92%8C%E6%9B%B4%E6%96%B0%E6%9D%80%E6%AF%92%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">安装和更新杀毒软件</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Windows%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">Windows服务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E6%97%A0%E7%94%A8%E6%9C%8D%E5%8A%A1-1\"><span class=\"toc-text\">关闭无用服务</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E9%80%89%E9%A1%B9\"><span class=\"toc-text\">默认启动选项</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E6%97%A0%E7%94%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E9%A1%B9\"><span class=\"toc-text\">关闭无用自启动项</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%ADwindows%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">关闭windows自动播放功能</span></a></li></ol></li></ol></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"中间件安全加固-klsday13","uid":"db9463cf6383f38bcf017a791d25f3b7","slug":"klsday13-安全加固","date":"2023-06-01T02:44:52.359Z","updated":"2023-06-02T11:50:55.389Z","comments":true,"path":"api/articles/klsday13-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-1p398w.jpg","text":" apache安全加固 账号设置 授权设置 日志设置 %a: 远程IP地址 %A: 本地IP地址 %B: 已发送的字节数，不包含HTTP头 %b: CLF格式的已发送字节数量，不包含HTTP头。例如当没有发送数据时，写入‘-’而不是0。 %&#123;FOOBAR&#125;e:...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}},"next_post":{"title":"docker容器-klsday11","uid":"6a5c3f7124a5a7810eca7a15febbc057","slug":"klsday11-docker","date":"2023-05-30T01:05:21.661Z","updated":"2023-06-01T11:13:52.123Z","comments":true,"path":"api/articles/klsday11-docker.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-jx32vy.jpg","text":" docker容器技术 docker容器概述 yum install -y epel-release docker容器的应用阿里云镜像加速器 查看centos镜像的详细资料：docker search centos --no-trunc docker run -itd --nam...","link":"","photos":[],"count_time":{"symbolsCount":"9k","symbolsTime":"8 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}