{"title":"Linux软件安装与账户权限-klsday3","uid":"4fcf9285313e12db2565769c48460179","slug":"klsday3-Linux","date":"2023-05-15T01:04:37.919Z","updated":"2023-05-15T23:24:08.338Z","comments":true,"path":"api/articles/klsday3-Linux.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-zyy7ro.jpg","content":"<h3 id=\"Linux应用程序基础\"><a href=\"#Linux应用程序基础\" class=\"headerlink\" title=\"Linux应用程序基础\"></a>Linux应用程序基础</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515101700456.png\" alt=\"image-20230515101700456\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515101949857.png\" alt=\"image-20230515101949857\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515102446978.png\" alt=\"image-20230515102446978\"></p>\n<h3 id=\"rpm命令\"><a href=\"#rpm命令\" class=\"headerlink\" title=\"rpm命令\"></a>rpm命令</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515102809661.png\" alt=\"image-20230515102809661\"></p>\n<p><code>rpm</code>命令用于管理软件。rpm原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM 套件管理方式的出现，让 Linux 易于安装，升级，间接提升了 Linux 的适用度。能被<code>rpm</code>命令安装的软件包一般以<code>.rpm</code>为文件后缀。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515103835608.png\" alt=\"image-20230515103835608\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104015169.png\" alt=\"image-20230515104015169\"></p>\n<p>常用选项</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104246492.png\" alt=\"image-20230515104246492\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104354357.png\" alt=\"image-20230515104354357\"></p>\n<p>举个例子</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104538904.png\" alt=\"image-20230515104538904\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104634938.png\" alt=\"image-20230515104634938\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104805244.png\" alt=\"image-20230515104805244\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515104920290.png\" alt=\"image-20230515104920290\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515105050157.png\" alt=\"image-20230515105050157\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">总结：\nrpm -ivh [package_name]         #安装软件包\nrpm -evh [package_name]         #卸载软件\nrpm -qlp *.rpm                  #列出rpm包的内容\nrpm -qa |grep [字符串]           #在已安装的所有软件中查询包含某字符串的软件版本\nrpm -ql [软件名]                 #列出该软件所有文件与目录所在的完整文件名\nrpm -qc [软件名]                 #列出软件的所有设置文件\nrpm -qR [软件名]                 #查询某软件依赖的其他软件\nrpm -qf [文件名]                 #查询文件属于哪个软件包</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515110446552.png\" alt=\"image-20230515110446552\"></p>\n<h3 id=\"使用源码安装\"><a href=\"#使用源码安装\" class=\"headerlink\" title=\"使用源码安装\"></a>使用源码安装</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515110958287.png\" alt=\"image-20230515110958287\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515111408254.png\" alt=\"image-20230515111408254\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515111733513.png\" alt=\"image-20230515111733513\">下载源码包，可以从官方网站或者开源社区网站获取。一般来说，源码包的命名格式为“package-version.tar.gz”，其中 package 表示软件名称，version 表示版本号。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515112139230.png\" alt=\"image-20230515112139230\"></p>\n<p>解压源码包，使用 tar 命令进行解压缩。在终端中进入源码包所在的目录，执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tar -zxvf package-version.tar.gz</code></pre>\n\n<p>解压后会得到一个文件夹，里面包含了源代码以及编译、安装所需的脚本和配置文件。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515134936366.png\" alt=\"image-20230515134936366\"></p>\n<p>进入源代码目录，执行 configure 脚本生成 Makefile。configure 脚本负责检测系统环境和软件依赖项，并生成针对当前系统平台的编译选项。执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cd package-version\n.&#x2F;configure</code></pre>\n\n<p>如果出现错误提示，则需要根据提示进行解决或安装缺少的依赖库。</p>\n<p>在执行 <code>./configure</code> 命令时，可以添加一些选项来对编译和安装进行配置。下面介绍几个常见的选项：</p>\n<p><code>--prefix=path</code>：指定软件安装的目录。默认情况下，软件会安装到 <code>/usr/local</code> 目录下，可以使用该选项来指定其他安装目录，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;configure --prefix&#x3D;&#x2F;usr</code></pre>\n\n<p><code>--with-xxx</code> &#x2F; <code>--without-xxx</code>：指定是否开启某个功能或依赖项。例如，如果某个软件需要依赖 OpenSSL 库来实现加密功能，则可以使用以下选项来指定 OpenSSL 库的位置：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;configure --with-ssl&#x3D;&#x2F;usr&#x2F;local&#x2F;openssl</code></pre>\n\n<p><code>--enable-xxx</code> &#x2F; <code>--disable-xxx</code>：指定是否开启某个功能。例如，如果某个软件有多种功能模块可供选择，则可以使用此选项来指定要编译的模块，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;configure --enable-module1 --disable-module2</code></pre>\n\n<p><code>--help</code>：查看软件的帮助文档和可用选项列表。</p>\n<p>以上只是部分常见选项，不同软件可能会有不同的选项列表。在执行 <code>./configure</code> 命令前，建议先查阅软件的官方文档以获取更详细的信息。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515135327627.png\" alt=\"image-20230515135327627\"></p>\n<p>在使用 <code>make</code> 命令进行编译时，可以添加一些选项来指定编译的方式和规则。下面介绍一些常用的选项：</p>\n<ul>\n<li><code>-f file</code>：指定要使用的 Makefile 文件。默认情况下，<code>make</code> 命令会在当前目录下查找名为 <code>Makefile</code> 或者 <code>makefile</code> 的文件，并自动使用其中的规则进行编译。如果需要使用其他名称或路径下的 Makefile 文件，可以使用该选项指定，例如：</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make -f &#x2F;path&#x2F;to&#x2F;Makefile</code></pre>\n\n<ul>\n<li><code>-j[num]</code>：指定并行编译的进程数。该选项可以加快编译速度，在多核 CPU 上尤为有效。<code>num</code> 表示并行编译的进程数，不指定 <code>num</code> 则表示使用系统可用的最大 CPU 核心数，例如：</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make -j4</code></pre>\n\n<p>该命令表示使用 4 个 CPU 核心并行编译。</p>\n<ul>\n<li><code>-C dir</code>：指定要编译的目录。默认情况下，<code>make</code> 命令会在当前目录下查找 Makefile 文件并进行编译。如果需要编译其他目录下的源代码，可以使用 <code>-C</code> 选项指定目标目录，例如：</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make -C &#x2F;path&#x2F;to&#x2F;source_code</code></pre>\n\n<ul>\n<li><p><code>-n</code>：仅显示 Makefile 中定义的编译规则，但不执行实际编译。该选项可以用于检查 Makefile 文件中定义的规则是否正确。</p>\n</li>\n<li><p><code>-B</code>：强制重新编译所有的目标文件，即使这些文件已经被编译过了。该选项可以确保在修改了源代码后重新编译所有的目标文件。</p>\n</li>\n<li><p><code>clean</code>：删除所有编译生成的目标文件和临时文件。使用该选项可以清空整个项目的编译结果，例如：</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make clean</code></pre>\n\n<ul>\n<li><p><code>install</code>：将编译生成的可执行文件和相关库文件等安装到指定的目录下。使用该选项需要具备安装权限或者使用 root 权限操作。</p>\n</li>\n<li><p><code>uninstall</code>：从系统中卸载已经安装的程序。该选项需要在已经执行了 <code>make install</code> 命令后使用。</p>\n</li>\n<li><p><code>all</code>:<code>make all</code> 是一个常见的 <code>make</code> 命令，它的作用是编译项目中的所有目标文件。通常，在使用 <code>make</code> 命令进行编译时，可以不指定要编译的目标文件，而是直接使用 <code>make</code> 或者 <code>make all</code> 命令，让 <code>make</code> 工具自动编译整个项目。例如：</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make all</code></pre>\n\n<p>该命令将会按照 Makefile 文件中定义的规则，自动编译整个项目中的所有目标文件。</p>\n<ul>\n<li><code>distclean</code></li>\n</ul>\n<p><code>make distclean</code> 是一个清空编译结果的命令，它的作用是删除所有编译生成的目标文件和临时文件，并还原源代码到初始状态。</p>\n<p>与 <code>make clean</code> 命令不同的是，<code>make distclean</code> 命令不仅会清除编译生成的目标文件，还会删除包括 configure 脚本在内的所有辅助文件，并还原源代码到初始状态。该命令可以帮助开发者在进行项目重构或者重新编译时，确保原有的编译结果已经完全被清空。例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make distclean</code></pre>\n\n<p>该命令将会删除所有编译生成的目标文件和临时文件，并还原源代码到初始状态。需要注意的是，该命令会删除所有辅助文件，因此需要谨慎使用，确保自己已经备份好了重要的文件。</p>\n<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>\n<p>执行 make 命令进行编译，将源代码编译成可执行文件。执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">make</code></pre>\n\n<p>如果编译成功，则会在源代码目录下生成可执行文件。如果出现错误提示，则需要根据提示进行解决或重新执行 configure 脚本。</p>\n<p>直接<code>make 回车</code>相当于<code>make all</code></p>\n<p>一般不要直接使用<code>make 回车</code>，这要效率很低，比如有四核cpu但只有一个核在干活</p>\n<p>可以<code>make -j4(这个数字是你系统cpu的核数)</code></p>\n<p>用<code>lscpu</code>可以查看cpu信息，包括核心数量</p>\n<p>用<code>free -m</code>查看内存的信息</p>\n<p>执行 make install 命令进行安装，将可执行文件和相关文件安装到系统目录下。</p>\n<p><strong>示例：</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">[root@centos7kls-aby httpd-2.2.15]# tar -zxvf httpd-2.2.15.tar.gz -C &#x2F;usr&#x2F;src\n[root@centos7kls-aby tools]# cd &#x2F;usr&#x2F;src\n[root@centos7kls-aby src]# ls\ndebug  httpd-2.2.15  kernels\n[root@centos7kls-aby src]# cd httpd-2.2.15&#x2F;\n[root@centos7kls-aby httpd-2.2.15]# ls\nABOUT_APACHE  buildconf      emacs-style     LAYOUT        NOTICE            ROADMAP\nacinclude.m4  CHANGES        httpd.dsp       libhttpd.dsp  NWGNUmakefile     server\nApache.dsw    config.layout  httpd.spec      LICENSE       os                srclib\nbuild         configure      include         Makefile.in   README            support\nBuildAll.dsp  configure.in   INSTALL         Makefile.win  README.platforms  test\nBuildBin.dsp  docs           InstallBin.dsp  modules       README-win32.txt  VERSIONING\n[root@centos7kls-aby httpd-2.2.15]# .&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;apache\n[root@centos7kls-aby httpd-2.2.15]# make -j2\n[root@centos7kls-aby httpd-2.2.15]# make install</code></pre>\n\n<h3 id=\"yum-命令\"><a href=\"#yum-命令\" class=\"headerlink\" title=\"yum 命令\"></a>yum 命令</h3><p><code>yum</code>命令是一个在 Fedora 和 RedHat 以及 SUSE 中的 Shell 前端软件包管理器。</p>\n<p>基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令。</p>\n<p><strong>yum 源配置</strong></p>\n<p>同apt命令一样，<code>yum</code>依然从源获取软件。在centos中yum源文件存储在<code>/etc/yum.repos.d</code>目录中。</p>\n<p>repo文件的示例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">[baseos]\nname&#x3D;Rocky Linux $releasever - BaseOS\nmirrorlist&#x3D;https:&#x2F;&#x2F;mirrors.rockylinux.org&#x2F;mirrorlist?arch&#x3D;$basearch&amp;repo&#x3D;BaseOS-$releasever\n#baseurl&#x3D;http:&#x2F;&#x2F;dl.rockylinux.org&#x2F;$contentdir&#x2F;$releasever&#x2F;BaseOS&#x2F;$basearch&#x2F;os&#x2F;\ngpgcheck&#x3D;1\nenabled&#x3D;1\ngpgkey&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-rockyofficial</code></pre>\n\n<p>epel源是redhat系比较常用的源。</p>\n<p>EPEL (Extra Packages for Enterprise Linux)是基于Fedora的一个项目，为“红帽系”的操作系统提供额外的软件包，适用于RHEL、CentOS和Scientific Linux.</p>\n<p>安装epel源只需要安装一个叫”epel-release”的软件包，这个软件包会自动配置yum的软件仓库。</p>\n<p>命令为：<code>dnf install -y epel-release</code></p>\n<p><strong>yum 命令</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum makecache                         #更新源（安装新源后执行）\nyum clean all                         #清除缓存目录（&#x2F;var&#x2F;cache&#x2F;yum）下的软件包及旧的headers\nyum list |grep                        #显示所有已经安装和可以安装的程序包\nyum info [package-name]               #显示安装包信息\nyum -y install [package-name]         #安装软件,默认选yes\nyum remove [package-name]             #卸载\nyum deplist rpm                       #查看程序rpm依赖情况\nyum update                            #更新全部软件包\nyum group list                        #列出组\nyum group install &quot;Security Tools&quot;    #安装‘Security Tools’软件组\nyum search                            #检索安装包</code></pre>\n\n<h3 id=\"dnf-命令\"><a href=\"#dnf-命令\" class=\"headerlink\" title=\"dnf 命令\"></a>dnf 命令</h3><p><code>DNF</code>是新一代的rpm软件包管理器。它正在逐步取代<code>yum</code>命令。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">dnf repolist                                           #该命令用于显示系统中可用的 DNF 软件库\ndnf repolist all                                       #该命令用于显示系统中可用和不可用的所有的 DNF 软件库\ndnf list                                               #用户系统上的所有来自软件库的可用软件包和所有已经安装在系统上的软件包\ndnf list installed                                     #该命令用于列出所有安装了的 RPM 包\ndnf list available                                     #用于列出来自所有可用软件库的可供安装的软件包\ndnf search [pakage]                                    #用该命令来搜索软件包\ndnf provides &#x2F;bin&#x2F;bash                                 #查找某一文件的提供者\ndnf info nano                                          #查看软件包详情\ndnf install [pakage]                                   #安装软件包\ndnf update systemd                                     #该命令用于升级指定软件包\ndnf check-update                                       #该命令用于检查系统中所有软件包的更新\ndnf update                                             #该命令用于升级系统中所有有可用升级的软件包\ndnf remove [pakage]                                    #删除系统中指定的软件包\ndnf autoremove                                         #删除无用孤立的软件包\ndnf clean all                                          #删除缓存的无用软件包\ndnf history                                            #查看您系统上 DNF 命令的执行历史\ndnf grouplist                                          #该命令用于列出所有的软件包组\ndnf groupinstall ‘Educational Software’                #该命令用于安装一个软件包组\ndnf groupupdate ‘Educational Software’                 #升级一个软件包组中的软件包\ndnf groupremove ‘Educational Software’                 #该命令用于删除一个软件包组\ndnf reinstall [pakage]                                 #该命令用于重新安装特定软件包</code></pre>\n\n<h3 id=\"Linux账号和权限管理\"><a href=\"#Linux账号和权限管理\" class=\"headerlink\" title=\"Linux账号和权限管理\"></a>Linux账号和权限管理</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515145838527.png\" alt=\"image-20230515145838527\"></p>\n<p> <img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515145922727.png\" alt=\"image-20230515145922727\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515150132450.png\" alt=\"image-20230515150132450\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515150251893.png\" alt=\"image-20230515150251893\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515151215988.png\" alt=\"image-20230515151215988\"></p>\n<p><code>date +%s</code> 该命令将输出当前时间的时间戳</p>\n<p>在 <code>/etc/shadow</code> 文件中，每个用户的信息都由多个字段组成，这些字段之间用冒号分隔。如果某个字段没有值，则对应的冒号也必须存在，这样才能保证每个字段的位置是一致的。</p>\n<p>一般情况下 <code>/etc/shadow</code> 中有 9 个冒号分隔的配置字段，每个字段的解释如下：</p>\n<ul>\n<li>用户名：表示该行记录所对应的用户账号名称。</li>\n<li>加密后的密码：该字段存储经过加密之后的用户口令。注意，此处并不是明文的用户密码，而是该密码经过哈希算法加密之后的字符串，使得管理员无法直接得到用户密码。如果该项为空，则表示该用户没有口令、没有口令管理工具，或者加密方式不支持，此情况下 root 用户可以通过 su 命令切换到该用户，无需密码。</li>\n<li>上次修改时间：该字段存储了密码最后一次被修改的时间，格式为 Unix 时间戳（距离 1970 年 1 月 1 日的秒数）。</li>\n<li>最小密码时效（单位：天）：该字段指定了密码修改的最短时间间隔，即两次修改密码之间的间隔不能低于该值。如果该字段的值为 -1，表示该项功能未启用。</li>\n<li>密码有效期（单位：天）：该字段指定了密码的有效期限，超过该期限的密码将自动失效，必须及时修改密码。如果该字段的值为 -1，则表示密码永不过期。</li>\n<li>密码过期前提示（单位：天）：该字段指定了密码即将失效时，提前多少天通知用户。例如，如果该字段设置为 7，则表示在距离密码到期的 7 天内，系统会提示用户尽快修改密码。</li>\n<li>密码过期后宽限时间（单位：天）：该字段指定了密码过期后，并不立刻失效，而是给用户一个宽限期，在这个期限内用户仍然可以使用旧密码。例如，如果该字段设置为 3，则表示在密码过期之后的 3 天内，用户可以继续使用旧密码登录系统。过了这个期限，旧密码将无法使用。</li>\n<li>账号失效时间：该字段指定了用户账号的失效日期，格式为 YYYY-MM-DD。如果该字段设置了日期，则当该日期到来之后，该用户账号将被禁止使用。如果该项功能未启用，则该字段的值为 -1。</li>\n<li>保留字段：该字段目前并未使用，留作未来扩展使用。</li>\n</ul>\n<p><code>/etc/shadow</code> 文件通常只有超级用户才能访问和修改，因此具有一定的安全性。同时，在处理密码信息时，需要注意保护用户的隐私和安全，避免密码泄露和攻击。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515152431853.png\" alt=\"image-20230515152431853\"></p>\n<p><code>useradd</code> 命令用于创建新的用户账号，其常用语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">useradd [option] username</code></pre>\n\n<p>其中 <code>username</code> 为新用户的用户名，<code>option</code> 是一些可选参数，常用的参数包括：</p>\n<ul>\n<li><code>-c</code>：指定用户账号的备注信息。</li>\n<li><code>-d</code>：指定用户主目录的路径。</li>\n<li><code>-e</code>：指定用户账号的过期日期，格式为 YYYY-MM-DD。</li>\n<li><code>-g</code>：指定用户账号所属的主组。</li>\n<li><code>-s</code>：指定用户使用的默认 shell。</li>\n<li><code>-u</code>：指定用户账号的 UID。</li>\n</ul>\n<p>以下是 <code>useradd</code> 命令可能会用到的其他参数：</p>\n<ul>\n<li><code>-M</code>：不创建用户主目录。</li>\n<li><code>-n</code>：不创建用户主组。</li>\n<li><code>-r</code>：创建系统账号，即 UID 在 500 以下的账号。</li>\n<li><code>-N</code>：不设置默认 shell。</li>\n</ul>\n<p>使用 <code>useradd</code> 命令只创建了用户账号，在创建账号后还需要为用户添加密码，可以使用 <code>passwd</code> 命令来设置密码。另外，若需要删除用户账号，可以使用 <code>userdel</code> 命令。</p>\n<p>请注意，使用 <code>useradd</code> 命令需要 root 用户权限。在非 root 权限下，可以使用 <code>sudo useradd</code> 命令来运行 <code>useradd</code> 命令。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515152755044.png\" alt=\"image-20230515152755044\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515152953817.png\" alt=\"image-20230515152953817\"></p>\n<p><code>/etc/skel</code> 目录是 Linux 系统中的一个特殊目录，用于存放用户登录时所需的默认文件和配置信息。在创建新用户账号时，系统会自动将该目录中的文件和子目录复制到新用户的家目录中，以便为用户提供一些默认配置文件和样例文件，方便用户进行个性化设置。</p>\n<p>具体来说，<code>/etc/skel</code> 目录中可以存放如下文件和目录：</p>\n<ol>\n<li><code>.bashrc</code>：Bash 命令行终端环境的配置文件。</li>\n<li><code>.bash_profile</code>：Bash 交互式非登录 Shell 的配置文件。</li>\n<li><code>.bash_logout</code>：用户每次退出时执行</li>\n</ol>\n<p><code>/etc/skel</code> 目录为新用户的默认家目录提供了一些常用的配置文件和样例文件，方便用户进行个性化修改和使用，同时也可以减少管理员的管理工作。在创建新用户账号时，系统会自动将 <code>/etc/skel</code> 中的文件和目录复制到新用户的家目录中去，使得用户可以直接使用这些文件，并且可以根据自己的需求进行修改。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515153537440.png\" alt=\"image-20230515153537440\"></p>\n<p><code>passwd</code> 命令用于设置或修改 Linux 系统中用户账户的密码。下面是 <code>passwd</code> 命令的详解：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">passwd [options] [username]</code></pre>\n\n<p>其中，<code>[username]</code> 表示要修改密码的用户账户名称。如果未指定该选项，则默认修改当前用户的密码。</p>\n<p><code>passwd</code> 命令常用的选项包括：</p>\n<ul>\n<li><code>-l, --lock</code>：锁定指定用户账户，禁止该用户登录系统。</li>\n<li><code>-u, --unlock</code>：解锁指定用户账户，允许该用户再次登录系统。</li>\n<li><code>-S, --status</code>：显示指定用户账户的密码状态信息。</li>\n</ul>\n<p>用户可以通过以下方式来设置或修改密码：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">$ passwd\nChanging password for user.\nNew password: \nRetype new password: \npasswd: all authentication tokens updated successfully.</code></pre>\n\n<p>在输入 <code>passwd</code> 命令后，系统会提示用户输入新密码两次以确认。如果新密码符合系统要求，则会提示密码更新成功。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515155626268.png\" alt=\"image-20230515155626268\"></p>\n<p><code>usermod</code> 是一个 Linux 系统中的命令行工具，用来修改现有用户账户的相关属性。下面是 <code>usermod</code> 命令的详解：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">usermod [options] [username]</code></pre>\n\n<p><code>usermod</code> 命令最常用的选项包括：</p>\n<ul>\n<li><code>-c, --comment COMMENT</code>：为用户添加注释信息。</li>\n<li><code>-d, --home HOME_DIR</code>：指定用户的主目录。</li>\n<li><code>-e, --expiredate EXPIRE_DATE</code>：设置用户账号的过期日期。</li>\n<li><code>-f, --inactive INACTIVE</code>：设置用户账号失效后的时间。</li>\n<li><code>-g, --gid GROUP</code>：指定用户所属的用户组。</li>\n<li><code>-G, --groups GROUPS</code>：将用户添加到附加的用户组。</li>\n<li><code>-l, --login NEW_LOGIN</code>：修改用户的登录名。</li>\n<li><code>-L, --lock</code>：锁定指定用户账户。</li>\n<li><code>-p, --password PASSWORD</code>：设置用户密码的加密形式。</li>\n<li><code>-s, --shell SHELL</code>：指定用户的默认 Shell。</li>\n<li><code>-u, --uid UID</code>：为用户指定新的 UID（User ID）。</li>\n<li><code>-U, --unlock</code>：解锁指定用户账户。</li>\n<li><code>-Z, --selinux-user SEUSER</code>：将 SELinux 用户信息与用户关联起来。</li>\n</ul>\n<p>在执行 <code>usermod</code> 命令时，需要指定要修改的用户账户名称（<code>username</code>）。同时，可以使用上述选项中的任何一个或多个，对该用户账户进行修改。需要注意的是，不同版本的 <code>usermod</code> 命令可能具有不同的选项和默认行为，使用前最好查看相关说明文档。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515155654306.png\" alt=\"image-20230515155654306\"></p>\n<p><code>userdel</code> 命令用于删除 Linux 系统中的用户账户和相关文件。下面是 <code>userdel</code> 命令的详解：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">userdel [options] username</code></pre>\n\n<p>其中，<code>username</code> 表示要删除的用户账户名称。</p>\n<p><code>userdel</code> 命令常用的选项包括：</p>\n<ul>\n<li><code>-f, --force</code>：强制删除指定用户账户，即使该用户当前已登录或有其他进程在运行。</li>\n<li><code>-r, --remove</code>：删除用户账户并连同其主目录及邮箱一同删除。</li>\n<li><code>-Z, --selinux-user</code>：在删除用户账户时对 SELinux 用户信息做出相应处理。</li>\n</ul>\n<p>通常情况下，使用 <code>userdel</code> 命令只需要指定要删除的用户账户名称即可，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo userdel john</code></pre>\n\n<p>此外，如果要删除用户账户的主目录和邮箱等相关文件，可以使用 <code>-r</code> 选项：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo userdel -r john</code></pre>\n\n<p>删除用户账户前应该确保该账户已不再被使用，并且要备份该用户的重要数据，以免误删。建议在执行 <code>userdel</code> 命令前，先通过 <code>id</code> 命令查看该用户是否还有其他关联，以避免产生不必要的问题。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515155837565.png\" alt=\"image-20230515155837565\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515160135265.png\" alt=\"image-20230515160135265\"></p>\n<p>在 CentOS 7 中，可以使用 <code>newgrp</code> 命令或 <code>sg</code> 命令来切换组。下面分别对这两个命令进行详解：</p>\n<p><strong><code>newgrp</code> 命令</strong></p>\n<p><code>newgrp</code> 命令用于切换到另一个主要组（primary group）。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">newgrp [groupname]</code></pre>\n\n<p>其中，<code>[groupname]</code> 表示要切换到的新主要组的名称。如果未指定该选项，则默认切换到该用户的默认主要组。</p>\n<p>需要注意的是，使用 <code>newgrp</code> 命令切换到新主要组后，仅对当前会话有效，退出当前会话后将失效。</p>\n<p><strong><code>sg</code> 命令</strong></p>\n<p><code>sg</code> 命令用于以其他用户身份执行命令，通常用于在当前 Shell 会话中暂时切换到另一个用户账户所属的组。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sg [options] [username | groupname]</code></pre>\n\n<p>其中，<code>[username | groupname]</code> 表示要切换到的用户名或组名。如果指定的是用户账户名，则将该用户账户的默认主要组作为执行组；如果指定的是组名，则将该组作为执行组。</p>\n<p><code>sg</code> 命令常用的选项包括：</p>\n<ul>\n<li><code>-c, --command</code>：指定要在新执行环境中运行的命令。</li>\n<li><code>-s, --shell</code>：指定要在新执行环境中使用的 Shell。</li>\n</ul>\n<p>需要注意的是，使用 <code>sg</code> 命令切换到新执行环境后，可能会产生安全风险。应该仅在必要时使用，并仔细核对切换后的执行环境。</p>\n<p>在切换组时，还需注意以下事项：</p>\n<ul>\n<li>切换组后，可能会出现无权访问某些文件或目录的情况。这是因为在 Linux 系统中，每个文件和目录都有一组所有者和一组权限，只有所有者或该组成员才能访问。因此，在切换组前应该确认所需访问的文件或目录是否具有正确的读写权限。</li>\n<li>切换组后修改或删除系统文件可能会导致系统故障，因此一定要谨慎操作，并备份系统重要文件。</li>\n<li>切换组涉及到系统用户和组的管理问题，因此最好由系统管理员或具有特定权限的用户来完成。</li>\n</ul>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515160317202.png\" alt=\"image-20230515160317202\"></p>\n<p><strong>语法</strong></p>\n<p><code>gpasswd</code> 命令的基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">gpasswd [options] group</code></pre>\n\n<p>其中，<code>group</code> 参数表示要管理的组名。</p>\n<p><strong>选项</strong></p>\n<p><code>gpasswd</code> 命令常用的选项如下：</p>\n<ul>\n<li><code>-a, --add user</code>：将指定用户添加到组中。</li>\n<li><code>-d, --delete user</code>：将指定用户从组中移除。</li>\n<li><code>-M, --members user,...</code>：设置组的成员列表，多个成员之间用逗号分隔。</li>\n<li><code>-r, --remove-password</code>：移除当前组的密码。</li>\n<li><code>-R, --restrict</code>：限制只有组管理员才能进行成员变更操作。</li>\n<li><code>-A, --administrators user,...</code>：设置组的管理员列表，多个管理员之间用逗号分隔。</li>\n</ul>\n<p><strong>举例</strong></p>\n<p>依次执行什么命令可以创建GID为10011，名为admin的组账号，井添加adm，daemon为成员用户</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">groupadd -g 10011 admin\ngpasswd -a adm admin\ngpasswd -a daemon admin</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515160634333.png\" alt=\"image-20230515160634333\"></p>\n<p>在 CentOS 7 中，<code>groupdel</code> 命令用于删除指定的组。下面对 <code>groupdel</code> 命令的语法和常用选项进行详细介绍。</p>\n<p><strong>语法</strong></p>\n<p><code>groupdel</code> 命令的基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">groupdel [options] group</code></pre>\n\n<p>其中，<code>group</code> 参数表示要删除的组名。</p>\n<p><strong>选项</strong></p>\n<p><code>groupdel</code> 命令常用的选项如下：</p>\n<ul>\n<li><code>-f, --force</code>：强制删除组，即使该组仍然有用户存在。</li>\n</ul>\n<p><strong>示例</strong></p>\n<p>以下是 <code>groupdel</code> 命令的一些使用示例。</p>\n<p>删除一个空的组 <code>testgroup</code>：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo groupdel testgroup</code></pre>\n\n<p>在执行上述命令后，系统会删除 <code>testgroup</code> 组，并将其所属的文件和目录的组属性修改为删除的组的默认属性。</p>\n<p>删除一个非空的组 <code>testgroup</code>：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo groupdel -f testgroup</code></pre>\n\n<p>在执行上述命令后，系统会强制删除 <code>testgroup</code> 组，并将其所属的文件和目录的组属性修改为删除的组的默认属性。如果该组仍然有用户存在，则需要使用 <code>-f</code> 选项来强制删除。</p>\n<p><strong>注意事项</strong></p>\n<p>在使用 <code>groupdel</code> 命令时，需要注意以下几点：</p>\n<ul>\n<li><code>groupdel</code> 命令需要root权限才能执行。</li>\n<li>在删除组时，应该先检查该组是否还有用户存在，避免误删除组导致系统故障或安全风险。</li>\n<li>在删除非空组时，应该使用 <code>-f</code> 选项来强制删除。但是，这样做可能会导致数据丢失或未知错误发生。因此，在删除非空组之前，应该先备份重要数据，并谨慎操作。</li>\n</ul>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515160737813.png\" alt=\"image-20230515160737813\"></p>\n<p><strong><code>who</code> 命令</strong></p>\n<p><code>who</code> 命令用于显示当前系统中已经登录的用户信息，输出结果包括以下几列：</p>\n<ul>\n<li>登录名</li>\n<li>终端设备（tty）</li>\n<li>登录时间（系统开机以来的时间）</li>\n<li>登录来源（通常为IP地址或域名）</li>\n</ul>\n<p><code>who</code> 命令的语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">who [options]</code></pre>\n\n<p><code>who</code> 命令的常用选项如下：</p>\n<ul>\n<li><code>-a, --all</code>：显示所有信息，包括系统开机以来的时间和系统运行状态。</li>\n<li><code>-b, --boot</code>：显示系统启动时间。</li>\n<li><code>-d, --dead</code>：仅显示尚未注销的用户。如果没有此选项，则默认显示所有用户信息。</li>\n<li><code>-q, --count</code>：仅显示当前登录用户数量，不显示具体用户信息。</li>\n<li><code>-s, --short</code>：仅显示用户名和与之关联的终端设备。</li>\n</ul>\n<p><strong>示例</strong></p>\n<p>以下是 <code>who</code> 命令的一些使用示例。</p>\n<p>显示当前登录用户信息：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">who</code></pre>\n\n<p>在执行上述命令后，系统会显示当前登录的用户信息，包括登录名、终端设备、登录时间和登录来源等。</p>\n<p>仅显示当前登录用户数量：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">who -q</code></pre>\n\n<p>在执行上述命令后，系统会显示当前登录用户的数量，而不显示具体用户信息。</p>\n<p><strong><code>w</code> 命令</strong></p>\n<p><code>w</code> 命令与 <code>who</code> 命令的功能类似，也用于显示已经登录到系统中的用户信息。与 <code>who</code> 命令不同的是，<code>w</code> 命令除了显示 <code>who</code> 命令的所有信息之外，还可以显示以下信息：</p>\n<ul>\n<li>当前时间</li>\n<li>系统负载情况</li>\n<li>用户正在执行的进程信息</li>\n</ul>\n<p><code>w</code> 命令的语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">w [options]</code></pre>\n\n<p><code>w</code> 命令的常用选项与 <code>who</code> 命令相同。其中，<code>-s</code> 选项与 <code>who</code> 命令的 <code>-s</code> 选项相同，仅显示用户名和终端设备。</p>\n<p><strong>示例</strong></p>\n<p>以下是 <code>w</code> 命令的一些使用示例。</p>\n<p>显示当前登录用户信息：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">w</code></pre>\n\n<p>在执行上述命令后，系统会显示当前登录的用户信息，包括登录名、终端设备、登录时间、登录来源、当前时间、系统负载情况和用户正在执行的进程信息等。</p>\n<p>仅显示用户名和终端设备：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">w -s</code></pre>\n\n<p>在执行上述命令后，系统会显示当前登录用户的用户名和所使用的终端设备。</p>\n<p><strong><code>users</code> 命令</strong></p>\n<p><strong>语法</strong></p>\n<p><code>users</code> 命令的基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">users</code></pre>\n\n<p><strong>示例</strong></p>\n<p>以下是 <code>users</code> 命令的一些使用示例。</p>\n<p>显示当前连接到系统的用户列表：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">users</code></pre>\n\n<p>在执行上述命令后，系统将输出当前连接到系统的用户列表，以空格分隔。</p>\n<p>使用管道符将 <code>users</code> 命令和 <code>who</code> 命令组合起来使用：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">who | awk &#39;&#123;print $1&#125;&#39; | sort | uniq | sed &#39;&#x2F;^$&#x2F;d&#39; | paste -sd &quot; &quot;</code></pre>\n\n<p>上述命令首先使用 <code>who</code> 命令列出当前登录的用户信息，然后使用 <code>awk</code> 命令提取第一列（也就是用户名），再使用 <code>sort</code>、<code>uniq</code> 和 <code>sed</code> 筛选出不重复的用户名列表，并删除空行。最后使用 <code>paste</code> 命令将所有用户名拼接在一起，并以空格分隔。</p>\n<p><strong>注意事项</strong></p>\n<p>需要注意的是，<code>users</code> 命令并不能够显示详细的用户信息或者登录时间等内容，其仅能够显示一个简单的用户列表。因此，在实际使用时，应该结合其他命令（如 <code>who</code> 或者 <code>w</code> 命令）来获取更为详细的用户登录信息。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515161228537.png\" alt=\"image-20230515161228537\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515161738050.png\" alt=\"image-20230515161738050\"></p>\n<p><code>ll</code> 命令用于显示当前目录下文件的详细信息，包括文件名、权限、拥有者、大小、创建时间等等。<code>ll</code> 命令的执行结果分为多列，每一列的含义如下：</p>\n<ul>\n<li>第一列：文件类型和权限。它是一个10个字符的字符串，如 <code>drwxr-xr-x</code>。第一个字符表示文件类型，其中 <code>d</code> 表示目录，<code>-</code> 表示普通文件，<code>l</code> 表示符号链接文件，<code>b</code> 表示块设备文件，<code>c</code> 表示字符设备文件，<code>p</code> 表示管道文件，<code>s</code> 表示套接字文件等等。后面9个字符分为3个部分，每个部分都是3个字符，分别代表文件拥有者的读、写、执行权限、同组用户的读、写、执行权限和其他用户的读、写、执行权限。<code>r</code> 表示读权限，<code>w</code> 表示写权限，<code>x</code> 表示执行权限，<code>-</code> 表示没有对应的权限。</li>\n<li>第二列：硬链接数。指向同一个文件的硬链接数量。目录的硬链接数即为目录自身以及子目录的数量加二。</li>\n<li>第三列：文件拥有者。指该文件的所有者用户名。如果使用了 <code>-g</code> 选项，则显示文件所属组的组名。</li>\n<li>第四列：文件所属组。指该文件所属的组名。</li>\n<li>第五列：文件大小。以字节为单位显示文件大小。</li>\n<li>第六列：文件创建时间或者最后的修改时间。如果使用了 <code>-c</code> 选项，则显示文件的创建时间；如果使用了 <code>-u</code> 选项，则显示文件最后一次访问的时间；否则，则显示文件最后一次修改的时间。</li>\n<li>第七列及以后：文件名。表示当前目录下的所有文件和子目录的文件名。</li>\n</ul>\n<p><code>ll</code> 命令实际上是 <code>ls -l</code> 命令的别名，因此这两个命令的执行结果是相同的。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515161841870.png\" alt=\"image-20230515161841870\"></p>\n<p><code>chmod</code> 命令用于修改文件或目录的权限。它可以通过数字或符号两种方式来指定权限。</p>\n<p><strong>数字方式</strong></p>\n<p>在数字方式中，使用一个三位八进制数来表示权限。其中，第一位代表特殊权限，后面两位分别代表文件所有者、同组用户和其他用户的权限。</p>\n<p>每一位数的含义如下：</p>\n<ul>\n<li>0：没有权限</li>\n<li>1：执行权限</li>\n<li>2：写权限</li>\n<li>3：写和执行权限</li>\n<li>4：读权限</li>\n<li>5：读和执行权限</li>\n<li>6：读和写权限</li>\n<li>7：读、写和执行权限</li>\n</ul>\n<p>例如，要将文件 <code>test.txt</code> 的权限设置为 <code>-rw-r--r--</code>（即文件所有者可读写，同组用户和其他用户只能读），可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod 644 test.txt</code></pre>\n\n<p>其中，<code>6</code> 代表文件所有者的读和写权限，<code>4</code> 代表同组用户和其他用户的只读权限。因此，这个命令将文件 <code>test.txt</code> 的权限设置为 <code>-rw-r--r--</code>。</p>\n<p><strong>符号方式</strong></p>\n<p>在符号方式中，使用符号来表示要修改的权限。其格式为：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">[ugoa...][+-&#x3D;][rwx]</code></pre>\n\n<p>其中，</p>\n<ul>\n<li><code>u</code>：文件所有者</li>\n<li><code>g</code>：同组用户</li>\n<li><code>o</code>：其他用户</li>\n<li><code>a</code>：所有用户（即 <code>ugo</code> 的合集）</li>\n</ul>\n<p>符号含义如下：</p>\n<ul>\n<li><code>+</code>：添加权限</li>\n<li><code>-</code>：去除权限</li>\n<li><code>=</code>：设置权限</li>\n</ul>\n<p>权限含义如下：</p>\n<ul>\n<li><code>r</code>：读权限</li>\n<li><code>w</code>：写权限</li>\n<li><code>x</code>：执行权限</li>\n<li><code>X</code>：只有当文件是目录或者至少一个执行权限被设置时才设置执行权限</li>\n<li><code>s</code>：设置 SUID 或 SGID 位</li>\n<li><code>t</code>：设置粘滞位（仅适用于目录）</li>\n</ul>\n<p>例如，要将文件 <code>test.txt</code> 的权限设置为 <code>-rw-r--r--</code>（即文件所有者可读写，同组用户和其他用户只能读），可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod u&#x3D;rw,g&#x3D;r,o&#x3D;r test.txt</code></pre>\n\n<p>其中，<code>u=rw,g=r,o=r</code> 表示设置文件所有者的读和写权限，同组用户和其他用户的只读权限。因此，这个命令将文件 <code>test.txt</code> 的权限设置为 <code>-rw-r--r--</code>。</p>\n<p>需要注意的是，<code>chmod</code> 命令不能够修改文件或目录的所有者和所属组，如果需要修改所有者和所属组，可以使用 <code>chown</code> 命令</p>\n<p><strong>选项</strong></p>\n<p><code>chmod</code> 命令可以使用的选项如下：</p>\n<ul>\n<li><code>-c</code>：只输出修改过的文件的权限信息。</li>\n<li><code>-f</code>：不显示错误信息。</li>\n<li><code>-v</code>：输出修改后每个文件的权限信息，包括未被修改的文件。</li>\n<li><code>-R</code>：递归地修改指定目录及其子目录下的所有文件和目录权限。</li>\n<li><code>-u</code>：只修改文件所有者的权限。</li>\n<li><code>-g</code>：只修改文件所属组的权限。</li>\n<li><code>-o</code>：只修改其他用户的权限。</li>\n<li><code>--reference=file</code>：使用另一个文件 <code>file</code> 的权限作为模板。</li>\n<li><code>--version</code>：显示 <code>chmod</code> 程序的版本号信息。</li>\n<li><code>--help</code>：显示帮助信息。</li>\n</ul>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515180610181.png\" alt=\"image-20230515180610181\"></p>\n<p><code>chown</code> 命令用于修改文件或目录的所有者和所属组。其基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chown [选项] [所有者][:[所属组]] 文件</code></pre>\n\n<p>其中，</p>\n<ul>\n<li><code>选项</code>：表示要使用的选项。</li>\n<li><code>所有者</code>：表示要将文件的所有者修改为该用户。</li>\n<li><code>所属组</code>：表示要将文件的所属组修改为该组。</li>\n<li><code>文件</code>：表示要修改权限的文件路径。</li>\n</ul>\n<p>例如，要将文件 <code>test.txt</code> 的所有者修改为用户 <code>binjie</code>，所属组修改为组名 <code>users</code>，可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chown binjie:users test.txt</code></pre>\n\n<p>如果只需要修改文件的所有者，可以省略 <code>:</code> 和所属组的名称，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chown binjie test.txt</code></pre>\n\n<p>如果需要递归地修改目录及其子目录中的文件所有者和所属组，可以使用 <code>-R</code> 选项，例如：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chown -R binjie:users &#x2F;home&#x2F;user1&#x2F;testdir&#x2F;</code></pre>\n\n<p><code>chown</code> 命令要求具有 <code>root</code> 用户或提供有效的 <code>sudo</code> 权限才能够成功修改系统文件的所有者或所属组。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515163222129.png\" alt=\"image-20230515163222129\"></p>\n<p><code>lsattr</code> 命令用于显示文件或目录的扩展属性。扩展属性是指除了常规 Unix 文件属性（如所有者、权限和修改时间等）以外的其他属性。</p>\n<p><code>lsattr</code> 命令的基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">lsattr [选项] 文件</code></pre>\n\n<p>其中，</p>\n<ul>\n<li><code>选项</code>：表示要使用的选项。</li>\n<li><code>文件</code>：表示要查询扩展属性的文件路径。</li>\n</ul>\n<p>例如，要查询文件 <code>test.txt</code> 的扩展属性，可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">lsattr test.txt</code></pre>\n\n<p>该命令将会输出一个包含某些字符的列表。这些字符中的一些描述了文件或目录上设置的扩展属性，另一些则描述了文件系统上启用了哪些特定功能。</p>\n<p>常见的扩展属性包括：</p>\n<ul>\n<li><code>a</code>：表示只能向文件中追加数据（append-only）。</li>\n<li><code>c</code>：表示这个文件或目录是压缩过的。</li>\n<li><code>i</code>：表示这个文件是不可变的（immutable），不能被删除、修改、重命名或链接。</li>\n<li><code>s</code>：表示执行文件时将把该文件中的数据保留在内存中，并在该文件执行结束时再次写入磁盘中，以加快该文件的执行速度。</li>\n<li><code>u</code>：表示当文件被删除后，其数据内容不会立即从磁盘上删除，而是保留在这个文件所在的文件系统的“未分配”块中，以便于恢复。</li>\n</ul>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515163309990.png\" alt=\"image-20230515163309990\"></p>\n<p><code>chattr</code> 命令用于修改文件或目录的扩展属性。扩展属性是指除了常规 Unix 文件属性（如所有者、权限和修改时间等）以外的其他属性。</p>\n<p><code>chattr</code> 命令的基本语法如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chattr [选项] 扩展属性 文件</code></pre>\n\n<p>其中，</p>\n<ul>\n<li><code>选项</code>：表示要使用的选项。</li>\n<li><code>扩展属性</code>：表示要设置或取消的扩展属性。</li>\n<li><code>文件</code>：表示要修改扩展属性的文件路径。</li>\n</ul>\n<p>例如，要将文件 <code>test.txt</code> 设置为只能向其中追加数据，可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chattr +a test.txt</code></pre>\n\n<p>如果需要取消这个扩展属性，可以执行以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chattr -a test.txt</code></pre>\n\n<p>常见的扩展属性包括：</p>\n<ul>\n<li><code>a</code>：表示只能向文件中追加数据（append-only）。</li>\n<li><code>c</code>：表示这个文件或目录是压缩过的。</li>\n<li><code>i</code>：表示这个文件是不可变的（immutable），不能被删除、修改、重命名或链接。</li>\n<li><code>s</code>：表示执行文件时将把该文件中的数据保留在内存中，并在该文件执行结束时再次写入磁盘中，以加快该文件的执行速度。</li>\n<li><code>u</code>：表示当文件被删除后，其数据内容不会立即从磁盘上删除，而是保留在这个文件所在的文件系统的“未分配”块中，以便于恢复。</li>\n</ul>\n<p>需要注意的是，<code>chattr</code> 命令需要具有适当的文件或目录访问权限才能够成功地修改扩展属性。同时，某些扩展属性可能只能由超级用户或特定的应用程序设置或取消。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515163800127.png\" alt=\"image-20230515163800127\"></p>\n<p>在 Linux 系统中，特殊的权限位 “s” 用于设置 SUID（Set User ID）和 SGID（Set Group ID）权限。当一个二进制文件拥有“s”权限时，它将在执行过程中以其所有者或所属组的身份运行，而不是以执行该二进制文件的用户的身份运行。</p>\n<p>具体来说，SUID 权限允许非特权用户以文件所有者的身份运行二进制文件。这通常用在需要以特权用户的身份执行某些任务的程序上，例如 passwd 命令。SGID 权限同样允许用户以文件所属组的身份运行二进制文件，这对于需要访问共享目录的多个用户来说非常有用。</p>\n<p>在 Linux 中，设置 SUID 和 SGID 权限的方法是通过 chmod 命令的数字模式来完成。以文件拥有者的身份运行的文件的权限模式是 4xxx，其中xxx表示文件的权限模式。类似地，以文件所属组的身份运行的文件的权限模式是 2xxx。例如，如果将 <code>/usr/bin/passwd</code> 文件的 SUID 权限设置为 “s”，可以使用以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod 4755 &#x2F;usr&#x2F;bin&#x2F;passwd</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515164614663.png\" alt=\"image-20230515164614663\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515164657811.png\" alt=\"image-20230515164657811\"></p>\n<p>在 Linux 中，粘滞位是一种特殊的文件权限位，用于控制对一个目录及其下面的文件的访问。当目录被设置了粘滞位后，只有目录的所有者和超级用户才有权力删除或重命名该目录下的文件。</p>\n<p>粘滞位通常用在具有共享目录的系统中，以避免误删除或移动其他用户创建的文件。比如，&#x2F;tmp 目录就经常被设置了粘滞位，以便让多个用户将临时文件存储在同一个目录下，但同时也能够防止用户误删其他用户的文件。</p>\n<p>在 Linux 中，通过使用 chmod 命令和 “t” 权限位来设置粘滞位。例如，如果你想将 &#x2F;tmp 目录设置为具有粘滞位，可以使用以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod +t &#x2F;tmp</code></pre>\n\n<p>只有目录的所有者和超级用户才能设置或取消目录的粘滞位。如果你想在一个目录下创建或修改文件，你需要有该目录的写权限，否则你将无法在该目录中进行操作。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515164712528.png\" alt=\"image-20230515164712528\"></p>\n<p>在 Linux 权限中，”S” 和 “s” 都表示特殊权限位 SUID（Set User ID）和 SGID（Set Group ID）。但是它们之间的区别在于所设置的特殊权限位同时还与文件或目录的其他权限位结合而产生不同的结果。</p>\n<p>当特殊权限位 “S” （大写字母）被设置在一个文件或目录的权限中时，它表示对应的 SUID 或 SGID 位未被设置为执行权限。这意味着，虽然文件或目录具有 SUID 或 SGID 权限，但在执行时，它们并不会以文件或目录所有者或所属组的身份来运行。换句话说，当 “S” 权限被设置时，SUID 或 SGID 权限只在原本的执行权限已经存在的情况下才会生效。否则不生效</p>\n<p>另一方面，当特殊权限位 “s” （小写字母）被设置时，它代表对应的 SUID 或 SGID 位已经设置了执行权限。这意味着文件或目录将会以文件或目录所有者或所属组的身份来运行，而不管是否已经存在原本的执行权限。</p>\n<p>在实际应用中，通常会使用 chmod 命令来设置特殊权限位。例如，如果你想将 “s” 权限设置给 <code>/usr/bin/passwd</code> 文件，可以使用以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod u+s &#x2F;usr&#x2F;bin&#x2F;passwd</code></pre>\n\n<p>如果你想将 “S” 权限设置给 <code>/home/mydir/</code> 目录，则可以使用以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod g+S &#x2F;home&#x2F;mydir&#x2F;</code></pre>\n\n<p>特殊权限位 “S” 和 “s” 用于在 Linux 权限系统中设置 SUID 或 SGID 权限。它们的区别在于所设置的 SUID 或 SGID 位是否已经有执行权限。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230515164730019.png\" alt=\"image-20230515164730019\"></p>\n<p>在 Linux 中，文件和目录的默认权限是由 umask 值来控制的。umask 值是一种掩码，它指定了新创建的文件或目录的默认权限。</p>\n<p>默认情况下，Linux 系统的 umask 值通常设置为 0022 或者 0002。这意味着对于新创建的文件，权限位的值会被减去 umask 值后所得到的结果。例如，默认情况下，一个新创建的文件权限位会被设置为 644（即 rw-r–r–），因为：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">666 (rw-rw-rw-) - 0022 (default umask) &#x3D; 644 (rw-r--r--)</code></pre>\n\n<p>对于新创建的目录，权限位的值也会被减去 umask 值后所得到的结果。例如，默认情况下，一个新创建的目录权限位会被设置为 755（即 rwxr-xr-x），因为：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">777 (rwxrwxrwx) - 0022 (default umask) &#x3D; 755 (rwxr-xr-x)</code></pre>\n\n<p>需要注意的是，umask 值的设置是以八进制数形式表示的。例如，如果你想将 umask 值设置为 0077，可以使用以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">umask 077</code></pre>\n\n<p>这将导致新创建的文件权限位为 600（即 rw——-），新创建的目录权限位为 700（即 rwx——）。</p>\n<p>总之，在 Linux 中，umask 值用于控制新创建文件和目录的默认权限。默认情况下，umask 值通常设置为 0022 或者 0002，这将导致新创建的文件权限位为 644，新创建的目录权限位为 755。您可以使用 umask 命令来更改 umask 值。</p>\n","text":"Linux应用程序基础 rpm命令 rpm命令用于管理软件。rpm原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM 套件管理方式的出现，让 Linux 易于安...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Linux%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">Linux应用程序基础</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#rpm%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">rpm命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">使用源码安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#yum-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">yum 命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#dnf-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">dnf 命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Linux%E8%B4%A6%E5%8F%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">Linux账号和权限管理</span></a></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Linux磁盘与进程管理-klsday4","uid":"3b6be56f4cef15238aa0c1509a18a652","slug":"klsday4-Linux","date":"2023-05-16T00:53:58.261Z","updated":"2023-06-08T12:23:37.555Z","comments":true,"path":"api/articles/klsday4-Linux.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-6dl2yw.png","text":"首先关闭虚拟机，在VMware中给虚拟机加几块新的硬盘 Linux磁盘和文件系统管理管理磁盘全流程查看信息 ll /dev/sd* lsblk # 列出块状设备 创建分区 fidsk /dev/sdb # 具体创建流程看下面 partprobe /dev/sdb # 刷新分区表 ...","link":"","photos":[],"count_time":{"symbolsCount":"23k","symbolsTime":"21 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}},"next_post":{"title":"Linux常用命令-klsday2","uid":"143a290a264195c37b7dbed6ffb5a1a7","slug":"klsday2-Linux","date":"2023-05-12T00:58:39.304Z","updated":"2023-05-13T11:25:52.291Z","comments":true,"path":"api/articles/klsday2-Linux.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-qzrmrl.png","text":" shell Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。 Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。 Ken Thompson 的 sh ...","link":"","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"12 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}