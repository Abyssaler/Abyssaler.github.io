{"title":"中间件安全加固-klsday13","uid":"db9463cf6383f38bcf017a791d25f3b7","slug":"klsday13-安全加固","date":"2023-06-01T02:44:52.359Z","updated":"2023-06-01T10:35:01.861Z","comments":true,"path":"api/articles/klsday13-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-96vwgx.jpg","content":"<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601102659167.png\" alt=\"image-20230601102659167\"></p>\n<h2 id=\"apache安全加固\"><a href=\"#apache安全加固\" class=\"headerlink\" title=\"apache安全加固\"></a>apache安全加固</h2><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601102721890.png\" alt=\"image-20230601102721890\"></p>\n<h3 id=\"账号设置\"><a href=\"#账号设置\" class=\"headerlink\" title=\"账号设置\"></a>账号设置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601103110821.png\" alt=\"image-20230601103110821\"></p>\n<h3 id=\"授权设置\"><a href=\"#授权设置\" class=\"headerlink\" title=\"授权设置\"></a>授权设置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601103514063.png\" alt=\"image-20230601103514063\"></p>\n<h3 id=\"日志设置\"><a href=\"#日志设置\" class=\"headerlink\" title=\"日志设置\"></a>日志设置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601103803764.png\" alt=\"image-20230601103803764\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">%a: 远程IP地址\n%A: 本地IP地址\n%B: 已发送的字节数，不包含HTTP头\n%b: CLF格式的已发送字节数量，不包含HTTP头。例如当没有发送数据时，写入‘-’而不是0。\n%&#123;FOOBAR&#125;e: 环境变量FOOBAR的内容\n%f: 文件名字\n%h: 远程主机\n%H:请求的协议\n%&#123;Foobar&#125;i: Foobar的内容，发送给服务器的请求的标头行。\n%l: 远程登录名字\n%m:请求的方法\n%&#123;Foobar&#125;n: 来自另外一个模块的注解“Foobar”的内容\n%&#123;Foobar&#125;o: Foobar的内容，应答的标头行\n%p: 服务器响应请求时使用的端口\n%P: 响应请求的子进程ID。\n%q:查询字符串（如果存在查询字符串，则包含“?”后面的部分；否则，它是一个空字符串。）\n%r: 请求的第一行\n%s: 状态。对于进行内部重定向的请求，这是指*原来*请求 的状态。如果用%...&gt;s，则是指后来的请求。\n%t: 以公共日志时间格式表示的时间（或称为标准英文格式）\n%&#123;format&#125;t: 时间\n%T: 为响应请求而耗费的时间，以秒计\n%u: 远程用户（根据验证信息而来，如果返回status（%s）是401则可能是伪造的）\n%U: 用户所请求的URL路径\n%v: 响应请求的服务器的ServerName\n%V: 依照UseCanonicalName设置得到的服务器名字\n%X:请求完成时的连接状态：\n\t\t\t\t\t\tX&#x3D;\t连接在应答完成前中断。\n\t\t\t\t\t\t+&#x3D;\t应答传送完后继续保持连接。\n\t\t\t\t\t\t-&#x3D;\t应答传送完后关闭连接。\n(在1.3以后的版本中，这个指令是%c，但这样就和过去的SSL语法：%&#123;var&#125;c冲突了)\n\n%I:接收的字节数，包括请求头的数据，并且不能为零。要使用这个指令你必须启用mod_logio模块。\n%O:发送的字节数，包括请求头的数据，并且不能为零。要使用这个指令你必须启用mod_logio模块。</code></pre>\n\n<p><strong>查看apache帮助</strong>：</p>\n<p><code>yum -y install httpd-manual</code></p>\n<p>访问<code>127.0.0.1/manual</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601104841580.png\" alt=\"image-20230601104841580\"></p>\n<h3 id=\"禁止访问外部文件\"><a href=\"#禁止访问外部文件\" class=\"headerlink\" title=\"禁止访问外部文件\"></a>禁止访问外部文件</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601105058212.png\" alt=\"image-20230601105058212\"></p>\n<h3 id=\"禁止列出目录\"><a href=\"#禁止列出目录\" class=\"headerlink\" title=\"禁止列出目录\"></a>禁止列出目录</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601105310230.png\" alt=\"image-20230601105310230\"></p>\n<h3 id=\"错误页面重定向\"><a href=\"#错误页面重定向\" class=\"headerlink\" title=\"错误页面重定向\"></a>错误页面重定向</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601105434070.png\" alt=\"image-20230601105434070\"></p>\n<h3 id=\"拒绝服务防范\"><a href=\"#拒绝服务防范\" class=\"headerlink\" title=\"拒绝服务防范\"></a>拒绝服务防范</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601105628937.png\" alt=\"image-20230601105628937\"></p>\n<h3 id=\"隐藏程序版本号\"><a href=\"#隐藏程序版本号\" class=\"headerlink\" title=\"隐藏程序版本号\"></a>隐藏程序版本号</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601105924685.png\" alt=\"image-20230601105924685\"></p>\n<p>不修改前</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601110228636.png\" alt=\"image-20230601110228636\"></p>\n<p>修改后</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601110442289.png\" alt=\"image-20230601110442289\"></p>\n<h3 id=\"关闭TRACE功能\"><a href=\"#关闭TRACE功能\" class=\"headerlink\" title=\"关闭TRACE功能\"></a>关闭TRACE功能</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601110835555.png\" alt=\"image-20230601110835555\"></p>\n<h3 id=\"禁用CGI功能\"><a href=\"#禁用CGI功能\" class=\"headerlink\" title=\"禁用CGI功能\"></a>禁用CGI功能</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601110947547.png\" alt=\"image-20230601110947547\"></p>\n<p><code>vim /etc/httpd/conf.modules.d/01-cgi.conf</code>  #当前版本（2.4）在这个路径</p>\n<h3 id=\"绑定监听地址\"><a href=\"#绑定监听地址\" class=\"headerlink\" title=\"绑定监听地址\"></a>绑定监听地址</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601111247642.png\" alt=\"image-20230601111247642\"></p>\n<h3 id=\"禁用非法HTTP方法\"><a href=\"#禁用非法HTTP方法\" class=\"headerlink\" title=\"禁用非法HTTP方法\"></a>禁用非法HTTP方法</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601111400912.png\" alt=\"image-20230601111400912\"></p>\n<h3 id=\"防止apache解析漏洞\"><a href=\"#防止apache解析漏洞\" class=\"headerlink\" title=\"防止apache解析漏洞\"></a>防止apache解析漏洞</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601111643074.png\" alt=\"image-20230601111643074\"></p>\n<h3 id=\"防止sql注入\"><a href=\"#防止sql注入\" class=\"headerlink\" title=\"防止sql注入\"></a>防止sql注入</h3><p>要求有lamp环境</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601111812587.png\" alt=\"image-20230601111812587\"></p>\n<h3 id=\"限制请求消息长度\"><a href=\"#限制请求消息长度\" class=\"headerlink\" title=\"限制请求消息长度\"></a>限制请求消息长度</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601112007404.png\" alt=\"image-20230601112007404\"></p>\n<h2 id=\"Nginx安全加固\"><a href=\"#Nginx安全加固\" class=\"headerlink\" title=\"Nginx安全加固\"></a>Nginx安全加固</h2><h3 id=\"隐藏版本信息\"><a href=\"#隐藏版本信息\" class=\"headerlink\" title=\"隐藏版本信息\"></a>隐藏版本信息</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601133857380.png\" alt=\"image-20230601133857380\"></p>\n<p>nginx网页目录: <code>/usr/share/nginx/html</code></p>\n<p>nginx配置文件: <code>/etc/nginx/nginx.conf</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601134350445.png\" alt=\"image-20230601134350445\"></p>\n<h3 id=\"限制目录权限\"><a href=\"#限制目录权限\" class=\"headerlink\" title=\"限制目录权限\"></a>限制目录权限</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601134430990.png\" alt=\"image-20230601134430990\"></p>\n<p>在nginx网页目录下新建一个test目录</p>\n<p>在test目录钟新建index.html</p>\n<p>设置权限</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">server &#123;\n        listen       80;\n        .\n        root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;\n        location ~ &#x2F;test&#x2F;.*\\.html$ &#123;\n        deny all;\n        &#125;</code></pre>\n\n<p>效果如图</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135156212.png\" alt=\"image-20230601135156212\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135036088.png\" alt=\"image-20230601135036088\"></p>\n<h3 id=\"限制IP地址访问\"><a href=\"#限制IP地址访问\" class=\"headerlink\" title=\"限制IP地址访问\"></a>限制IP地址访问</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135337552.png\" alt=\"image-20230601135337552\"></p>\n<h3 id=\"禁止浏览目录内容\"><a href=\"#禁止浏览目录内容\" class=\"headerlink\" title=\"禁止浏览目录内容\"></a>禁止浏览目录内容</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135437164.png\" alt=\"image-20230601135437164\"></p>\n<h3 id=\"错误页面重定向-1\"><a href=\"#错误页面重定向-1\" class=\"headerlink\" title=\"错误页面重定向\"></a>错误页面重定向</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135540468.png\" alt=\"image-20230601135540468\"></p>\n<h3 id=\"日志配置\"><a href=\"#日志配置\" class=\"headerlink\" title=\"日志配置\"></a>日志配置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135633616.png\" alt=\"image-20230601135633616\"></p>\n<h3 id=\"限制http请求方法\"><a href=\"#限制http请求方法\" class=\"headerlink\" title=\"限制http请求方法\"></a>限制http请求方法</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601135809296.png\" alt=\"image-20230601135809296\"></p>\n<h3 id=\"限制并发和速度\"><a href=\"#限制并发和速度\" class=\"headerlink\" title=\"限制并发和速度\"></a>限制并发和速度</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601140002231.png\" alt=\"image-20230601140002231\"></p>\n<h3 id=\"控制超时时间\"><a href=\"#控制超时时间\" class=\"headerlink\" title=\"控制超时时间\"></a>控制超时时间</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601140615885.png\" alt=\"image-20230601140615885\"></p>\n<h3 id=\"防盗链\"><a href=\"#防盗链\" class=\"headerlink\" title=\"防盗链\"></a>防盗链</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601140707036.png\" alt=\"image-20230601140707036\"></p>\n<h3 id=\"nginx降权\"><a href=\"#nginx降权\" class=\"headerlink\" title=\"nginx降权\"></a>nginx降权</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601141315497.png\" alt=\"image-20230601141315497\"></p>\n<h3 id=\"解析漏洞\"><a href=\"#解析漏洞\" class=\"headerlink\" title=\"解析漏洞\"></a>解析漏洞</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601141535454.png\" alt=\"image-20230601141535454\"></p>\n<h2 id=\"tomcat安全加固\"><a href=\"#tomcat安全加固\" class=\"headerlink\" title=\"tomcat安全加固\"></a>tomcat安全加固</h2><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601141729500.png\" alt=\"image-20230601141729500\"></p>\n<h3 id=\"tomcat控制台用户配置\"><a href=\"#tomcat控制台用户配置\" class=\"headerlink\" title=\"tomcat控制台用户配置\"></a>tomcat控制台用户配置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601143444638.png\" alt=\"image-20230601143444638\"></p>\n<h3 id=\"开启tomcat的访问日志\"><a href=\"#开启tomcat的访问日志\" class=\"headerlink\" title=\"开启tomcat的访问日志\"></a>开启tomcat的访问日志</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601143715496.png\" alt=\"image-20230601143715496\"></p>\n<h3 id=\"自定义404错误页面\"><a href=\"#自定义404错误页面\" class=\"headerlink\" title=\"自定义404错误页面\"></a>自定义404错误页面</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601144010903.png\" alt=\"image-20230601144010903\"></p>\n<h3 id=\"关闭目录浏览\"><a href=\"#关闭目录浏览\" class=\"headerlink\" title=\"关闭目录浏览\"></a>关闭目录浏览</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145219561.png\" alt=\"image-20230601145219561\"></p>\n<h3 id=\"使用安全的http请求\"><a href=\"#使用安全的http请求\" class=\"headerlink\" title=\"使用安全的http请求\"></a>使用安全的http请求</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145405350.png\" alt=\"image-20230601145405350\"></p>\n<h3 id=\"限制IP访问\"><a href=\"#限制IP访问\" class=\"headerlink\" title=\"限制IP访问\"></a>限制IP访问</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145440859.png\" alt=\"image-20230601145440859\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&lt;Valve className&#x3D;&quot;org.apache.catalina.valves.RemoteAddrValve&quot; allow&#x3D;&quot;192.168.1.2|192.168.2.3&quot; deny&#x3D;&quot;&quot;&#x2F;&gt; --只允许192.168.1.2和192.168.2.3\n\n&lt;Valve className&#x3D;&quot;org.apache.catalina.valves.RemoteAddrValve&quot; allow&#x3D;&quot;&quot; deny&#x3D;&quot;192.168.1.2|192.168.2.3&quot;&#x2F;&gt; --拒绝192.168.1.2和192.168.2.3 </code></pre>\n\n<h3 id=\"登陆超时退出\"><a href=\"#登陆超时退出\" class=\"headerlink\" title=\"登陆超时退出\"></a>登陆超时退出</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145716411.png\" alt=\"image-20230601145716411\"></p>\n<h3 id=\"更改默认端口\"><a href=\"#更改默认端口\" class=\"headerlink\" title=\"更改默认端口\"></a>更改默认端口</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145915854.png\" alt=\"image-20230601145915854\"></p>\n<h3 id=\"启动https加密访问\"><a href=\"#启动https加密访问\" class=\"headerlink\" title=\"启动https加密访问\"></a>启动https加密访问</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601145947583.png\" alt=\"image-20230601145947583\"></p>\n<h3 id=\"随时更新补丁\"><a href=\"#随时更新补丁\" class=\"headerlink\" title=\"随时更新补丁\"></a>随时更新补丁</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601151354916.png\" alt=\"image-20230601151354916\"></p>\n<h2 id=\"jboss安全加固\"><a href=\"#jboss安全加固\" class=\"headerlink\" title=\"jboss安全加固\"></a>jboss安全加固</h2><p>运行jboss7要注意Java版本,不能太高,最好1.7.0</p>\n<p>以下除非特别标注的,都是对jboss6加固</p>\n<h3 id=\"开启日志功能\"><a href=\"#开启日志功能\" class=\"headerlink\" title=\"开启日志功能\"></a>开启日志功能</h3><p>jboss6</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601160239370.png\" alt=\"image-20230601160239370\"></p>\n<p>jboss7</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601160725820.png\" alt=\"image-20230601160725820\"></p>\n<h3 id=\"重定向错误页面\"><a href=\"#重定向错误页面\" class=\"headerlink\" title=\"重定向错误页面\"></a>重定向错误页面</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601161316802.png\" alt=\"image-20230601161316802\"></p>\n<h3 id=\"控制台认证\"><a href=\"#控制台认证\" class=\"headerlink\" title=\"控制台认证\"></a>控制台认证</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601161639236.png\" alt=\"image-20230601161639236\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601162142781.png\" alt=\"image-20230601162142781\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601162156928.png\" alt=\"image-20230601162156928\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601162916680.png\" alt=\"image-20230601162916680\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601163126098.png\" alt=\"image-20230601163126098\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601163404498.png\" alt=\"image-20230601163404498\"></p>\n<h3 id=\"关闭status\"><a href=\"#关闭status\" class=\"headerlink\" title=\"关闭status\"></a>关闭status</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601164338248.png\" alt=\"image-20230601164338248\"></p>\n<h3 id=\"移走默认文件\"><a href=\"#移走默认文件\" class=\"headerlink\" title=\"移走默认文件\"></a>移走默认文件</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601164602967.png\" alt=\"image-20230601164602967\"></p>\n<h3 id=\"禁止列出目录-1\"><a href=\"#禁止列出目录-1\" class=\"headerlink\" title=\"禁止列出目录\"></a>禁止列出目录</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601164806035.png\" alt=\"image-20230601164806035\"></p>\n<h3 id=\"超时设置\"><a href=\"#超时设置\" class=\"headerlink\" title=\"超时设置\"></a>超时设置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601164932190.png\" alt=\"image-20230601164932190\"></p>\n<h3 id=\"修改默认端口\"><a href=\"#修改默认端口\" class=\"headerlink\" title=\"修改默认端口\"></a>修改默认端口</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230601165115742.png\" alt=\"image-20230601165115742\"></p>\n","feature":true,"text":" apache安全加固 账号设置 授权设置 日志设置 %a: 远程IP地址 %A: 本地IP地址 %B: 已发送的字节数，不包含HTTP头 %b: CLF格式的已发送字节数量，不包含HTTP头。例如当没有发送数据时，写入‘-’而不是0。 %&#123;FOOBAR&#125;e:...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":25,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":12,"path":"api/tags/kls.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#apache%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">apache安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B4%A6%E5%8F%B7%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">账号设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%88%E6%9D%83%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">授权设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">日志设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E8%AE%BF%E9%97%AE%E5%A4%96%E9%83%A8%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">禁止访问外部文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E5%88%97%E5%87%BA%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">禁止列出目录</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E9%87%8D%E5%AE%9A%E5%90%91\"><span class=\"toc-text\">错误页面重定向</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E9%98%B2%E8%8C%83\"><span class=\"toc-text\">拒绝服务防范</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9A%90%E8%97%8F%E7%A8%8B%E5%BA%8F%E7%89%88%E6%9C%AC%E5%8F%B7\"><span class=\"toc-text\">隐藏程序版本号</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%ADTRACE%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">关闭TRACE功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E7%94%A8CGI%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">禁用CGI功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%91%E5%AE%9A%E7%9B%91%E5%90%AC%E5%9C%B0%E5%9D%80\"><span class=\"toc-text\">绑定监听地址</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E7%94%A8%E9%9D%9E%E6%B3%95HTTP%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">禁用非法HTTP方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%98%B2%E6%AD%A2apache%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">防止apache解析漏洞</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%98%B2%E6%AD%A2sql%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">防止sql注入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E8%AF%B7%E6%B1%82%E6%B6%88%E6%81%AF%E9%95%BF%E5%BA%A6\"><span class=\"toc-text\">限制请求消息长度</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Nginx%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">Nginx安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9A%90%E8%97%8F%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">隐藏版本信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90\"><span class=\"toc-text\">限制目录权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6IP%E5%9C%B0%E5%9D%80%E8%AE%BF%E9%97%AE\"><span class=\"toc-text\">限制IP地址访问</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E6%B5%8F%E8%A7%88%E7%9B%AE%E5%BD%95%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">禁止浏览目录内容</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E9%87%8D%E5%AE%9A%E5%90%91-1\"><span class=\"toc-text\">错误页面重定向</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">日志配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6http%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">限制http请求方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E5%B9%B6%E5%8F%91%E5%92%8C%E9%80%9F%E5%BA%A6\"><span class=\"toc-text\">限制并发和速度</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%A7%E5%88%B6%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">控制超时时间</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%98%B2%E7%9B%97%E9%93%BE\"><span class=\"toc-text\">防盗链</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#nginx%E9%99%8D%E6%9D%83\"><span class=\"toc-text\">nginx降权</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">解析漏洞</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#tomcat%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">tomcat安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#tomcat%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">tomcat控制台用户配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AFtomcat%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">开启tomcat的访问日志</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89404%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2\"><span class=\"toc-text\">自定义404错误页面</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E7%9B%AE%E5%BD%95%E6%B5%8F%E8%A7%88\"><span class=\"toc-text\">关闭目录浏览</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%AE%89%E5%85%A8%E7%9A%84http%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">使用安全的http请求</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6IP%E8%AE%BF%E9%97%AE\"><span class=\"toc-text\">限制IP访问</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%99%BB%E9%99%86%E8%B6%85%E6%97%B6%E9%80%80%E5%87%BA\"><span class=\"toc-text\">登陆超时退出</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">更改默认端口</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8https%E5%8A%A0%E5%AF%86%E8%AE%BF%E9%97%AE\"><span class=\"toc-text\">启动https加密访问</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9A%8F%E6%97%B6%E6%9B%B4%E6%96%B0%E8%A1%A5%E4%B8%81\"><span class=\"toc-text\">随时更新补丁</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#jboss%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">jboss安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AF%E6%97%A5%E5%BF%97%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">开启日志功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%AE%9A%E5%90%91%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2\"><span class=\"toc-text\">重定向错误页面</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%AE%A4%E8%AF%81\"><span class=\"toc-text\">控制台认证</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%ADstatus\"><span class=\"toc-text\">关闭status</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A7%BB%E8%B5%B0%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">移走默认文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E5%88%97%E5%87%BA%E7%9B%AE%E5%BD%95-1\"><span class=\"toc-text\">禁止列出目录</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B6%85%E6%97%B6%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">超时设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">修改默认端口</span></a></li></ol></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"系统加固-klsday12","uid":"6eebacce59e6873455fbd427aa546b9b","slug":"klsday12-安全加固","date":"2023-05-30T14:07:21.312Z","updated":"2023-06-01T10:35:38.155Z","comments":true,"path":"api/articles/klsday12-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-96vwgx.jpg","text":" 理论讲解 Linux系统加固 账号管理与认证授权 sudo 新建test用户 useradd test passwd test su test 编辑sudoers文件 如果不想输入sudo密码可以修改成 再次尝试sudo新建用户 检查高权限文件 find / -type f \\...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":25,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":12,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"feature":true}}