{"title":"PHP文件","uid":"e635c3e685c2a214ead8e396e5b6c265","slug":"03PHP文件","date":"2023-01-10T13:21:22.644Z","updated":"2022-11-27T07:57:10.467Z","comments":true,"path":"api/articles/03PHP文件.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typorawallhaven-y8lqo7_1920x1080.png","content":"<h1 id=\"文件处理\"><a href=\"#文件处理\" class=\"headerlink\" title=\"文件处理\"></a>文件处理</h1><p>fopen() 函数用于在 PHP 中打开文件。</p>\n<h2 id=\"打开文件\"><a href=\"#打开文件\" class=\"headerlink\" title=\"打开文件\"></a>打开文件</h2><p>fopen() 函数用于在 PHP 中打开文件。</p>\n<p>此函数的第一个参数含有要打开的文件的名称，第二个参数规定了使用哪种模式来打开文件：</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;html&gt;\n&lt;body&gt;\n\n&lt;?php\n$file&#x3D;fopen(&quot;welcome.txt&quot;,&quot;r&quot;);\n?&gt;\n\n&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n<p>文件可能通过下列模式来打开：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">模式</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">r</td>\n<td align=\"left\">只读。在文件的开头开始。</td>\n</tr>\n<tr>\n<td align=\"left\">r+</td>\n<td align=\"left\">读&#x2F;写。在文件的开头开始。</td>\n</tr>\n<tr>\n<td align=\"left\">w</td>\n<td align=\"left\">只写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td>\n</tr>\n<tr>\n<td align=\"left\">w+</td>\n<td align=\"left\">读&#x2F;写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td>\n</tr>\n<tr>\n<td align=\"left\">a</td>\n<td align=\"left\">追加。打开并向文件末尾进行写操作，如果文件不存在，则创建新文件。</td>\n</tr>\n<tr>\n<td align=\"left\">a+</td>\n<td align=\"left\">读&#x2F;追加。通过向文件末尾写内容，来保持文件内容。</td>\n</tr>\n<tr>\n<td align=\"left\">x</td>\n<td align=\"left\">只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td>\n</tr>\n<tr>\n<td align=\"left\">x+</td>\n<td align=\"left\">读&#x2F;写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td>\n</tr>\n</tbody></table>\n<p><strong>注释：</strong>如果 fopen() 函数无法打开指定文件，则返回 0 (false)</p>\n<p>如果 fopen() 函数不能打开指定的文件，下面的实例会生成一段消息</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;html&gt;\n&lt;body&gt;\n\n&lt;?php\n$file&#x3D;fopen(&quot;welcome.txt&quot;,&quot;r&quot;) or exit(&quot;Unable to open file!&quot;);\n?&gt;\n\n&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n\n\n<h2 id=\"关闭文件\"><a href=\"#关闭文件\" class=\"headerlink\" title=\"关闭文件\"></a>关闭文件</h2><p>fclose() 函数用于关闭打开的文件</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;?php\n$file &#x3D; fopen(&quot;test.txt&quot;,&quot;r&quot;);\n\n&#x2F;&#x2F;执行一些代码\n\nfclose($file);\n?&gt;</code></pre>\n\n\n\n<h2 id=\"逐行读取文件\"><a href=\"#逐行读取文件\" class=\"headerlink\" title=\"逐行读取文件\"></a>逐行读取文件</h2><p>fgets() 函数用于从文件中逐行读取文件。</p>\n<p><strong>注释：</strong>在调用该函数之后，文件指针会移动到下一行。</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;?php\n$file &#x3D; fopen(&quot;welcome.txt&quot;, &quot;r&quot;) or exit(&quot;无法打开文件!&quot;);\n&#x2F;&#x2F; 读取文件每一行，直到文件结尾\nwhile(!feof($file))\n&#123;\n    echo fgets($file). &quot;&lt;br&gt;&quot;;\n&#125;\nfclose($file);\n?&gt;</code></pre>\n\n\n\n<h2 id=\"逐字符读取文件\"><a href=\"#逐字符读取文件\" class=\"headerlink\" title=\"逐字符读取文件\"></a>逐字符读取文件</h2><p>fgetc() 函数用于从文件中逐字符地读取文件。</p>\n<p><strong>注释：</strong>在调用该函数之后，文件指针会移动到下一个字符。</p>\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><p>下面的实例逐字符地读取文件，直到文件末尾为止</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;?php\n$file&#x3D;fopen(&quot;welcome.txt&quot;,&quot;r&quot;) or exit(&quot;无法打开文件!&quot;);\nwhile (!feof($file))\n&#123;\n    echo fgetc($file);\n&#125;\nfclose($file);\n?&gt;</code></pre>\n\n\n\n\n\n\n\n<h1 id=\"文件上传表单\"><a href=\"#文件上传表单\" class=\"headerlink\" title=\"文件上传表单\"></a>文件上传表单</h1><p>通过 PHP，可以把文件上传到服务器</p>\n<p>test 项目下完成，目录结构为：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">test\n|-----upload             # 文件上传的目录\n|-----form.html          # 表单文件\n|-----upload_file.php    # php 上传代码</code></pre>\n\n\n\n<h2 id=\"创建一个文件上传表单\"><a href=\"#创建一个文件上传表单\" class=\"headerlink\" title=\"创建一个文件上传表单\"></a>创建一个文件上传表单</h2><p>form.html</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;\n&lt;title&gt;表单&lt;&#x2F;title&gt;\n&lt;&#x2F;head&gt;\n&lt;body&gt;\n\n&lt;form action&#x3D;&quot;upload_file.php&quot; method&#x3D;&quot;post&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;\n    &lt;label for&#x3D;&quot;file&quot;&gt;文件名：&lt;&#x2F;label&gt;\n    &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;file&quot; id&#x3D;&quot;file&quot;&gt;&lt;br&gt;\n    &lt;input type&#x3D;&quot;submit&quot; name&#x3D;&quot;submit&quot; value&#x3D;&quot;提交&quot;&gt;\n&lt;&#x2F;form&gt;\n\n&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n\n\n<h2 id=\"创建上传脚本\"><a href=\"#创建上传脚本\" class=\"headerlink\" title=\"创建上传脚本\"></a>创建上传脚本</h2><p>“upload_file.php” 文件含有供上传文件的代码</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">&lt;?php\nif ($_FILES[&quot;file&quot;][&quot;error&quot;] &gt; 0)\n&#123;\n    echo &quot;错误：&quot; . $_FILES[&quot;file&quot;][&quot;error&quot;] . &quot;&lt;br&gt;&quot;;\n&#125;\nelse\n&#123;\n    echo &quot;上传文件名: &quot; . $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot;&lt;br&gt;&quot;;\n    echo &quot;文件类型: &quot; . $_FILES[&quot;file&quot;][&quot;type&quot;] . &quot;&lt;br&gt;&quot;;\n    echo &quot;文件大小: &quot; . ($_FILES[&quot;file&quot;][&quot;size&quot;] &#x2F; 1024) . &quot; kB&lt;br&gt;&quot;;\n    echo &quot;文件临时存储的位置: &quot; . $_FILES[&quot;file&quot;][&quot;tmp_name&quot;];\n&#125;\n?&gt;</code></pre>\n\n\n\n<p>通过使用 PHP 的全局数组 $_FILES，你可以从客户计算机向远程服务器上传文件。</p>\n<p>第一个参数是表单的 input name，第二个下标可以是 “name”、”type”、”size”、”tmp_name” 或 “error”。如下所示：</p>\n<ul>\n<li>$_FILES[“file”][“name”] - 上传文件的名称</li>\n<li>$_FILES[“file”][“type”] - 上传文件的类型</li>\n<li>$_FILES[“file”][“size”] - 上传文件的大小，以字节计</li>\n<li>$_FILES[“file”][“tmp_name”] - 存储在服务器的文件的临时副本的名称</li>\n<li>$_FILES[“file”][“error”] - 由文件上传导致的错误代码</li>\n</ul>\n<p>这是一种非常简单文件上传方式。基于安全方面的考虑，您应当增加有关允许哪些用户上传文件的限制。</p>\n","text":"文件处理fopen() 函数用于在 PHP 中打开文件。 打开文件fopen() 函数用于在 PHP 中打开文件。 此函数的第一个参数含有要打开的文件的名称，第二个参数规定了使用哪种模式来打开文件： &lt;html&gt; &lt;body&gt; &lt;?php $file...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":13,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"php","slug":"php","count":8,"path":"api/tags/php.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86\"><span class=\"toc-text\">文件处理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">打开文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">关闭文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%90%E8%A1%8C%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">逐行读取文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%90%E5%AD%97%E7%AC%A6%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">逐字符读取文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E4%BE%8B\"><span class=\"toc-text\">实例</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A1%A8%E5%8D%95\"><span class=\"toc-text\">文件上传表单</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A1%A8%E5%8D%95\"><span class=\"toc-text\">创建一个文件上传表单</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">创建上传脚本</span></a></li></ol></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://pic.kts.g.mi.com/551ced5839599747048c3c99a9d47df4203311636470612235.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"DC-3靶机渗透","uid":"c17a69eda9da12f79f4648a25efd8897","slug":"DC-3靶机渗透","date":"2023-01-10T13:21:22.664Z","updated":"2023-01-08T08:27:46.585Z","comments":true,"path":"api/articles/DC-3靶机渗透.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typorawallhaven-dpj35g.jpg","text":"DC-3靶机渗透全流程一:实验环境攻击机:kali2022(192.168.2.103) 靶机:dc-3(192.168.2.102) 二:信息收集主机发现netdiscover -i eth0 -r 192.168.2.0/24 发现目标主机 端口扫描masscan --rat...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"渗透从入门到入土","slug":"渗透从入门到入土","count":7,"path":"api/categories/渗透从入门到入土.json"}],"tags":[{"name":"DC系列靶机","slug":"DC系列靶机","count":7,"path":"api/tags/DC系列靶机.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://pic.kts.g.mi.com/551ced5839599747048c3c99a9d47df4203311636470612235.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}},"next_post":{"title":"PHP连接mysql数据库","uid":"e8eeb095a66f2218f43f6c5e63475a56","slug":"04PHP连接MySQL数据库","date":"2023-01-10T13:21:22.644Z","updated":"2022-11-12T05:48:38.034Z","comments":true,"path":"api/articles/04PHP连接MySQL数据库.json","keywords":null,"cover":"https://i.postimg.cc/Cx8H61dn/php-PNG26.png","text":"通过 PHP，您可以连接和操作数据库。 连接 MySQL在我们访问 MySQL 数据库前，我们需要先连接到数据库服务器 (MySQLi - 面向对象）&lt;?php $servername &#x3D; &quot;localhost&quot;; $username &#x3...","link":"","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":13,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"php","slug":"php","count":8,"path":"api/tags/php.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://pic.kts.g.mi.com/551ced5839599747048c3c99a9d47df4203311636470612235.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}