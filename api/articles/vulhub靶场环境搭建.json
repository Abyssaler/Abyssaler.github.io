{"title":"vulhub靶场环境搭建","uid":"1fa64911bbe068fc2410b2322a01cf3e","slug":"vulhub靶场环境搭建","date":"2023-01-10T13:21:22.708Z","updated":"2022-11-24T09:00:46.255Z","comments":true,"path":"api/articles/vulhub靶场环境搭建.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora3f878fc75ad84405bffa29a309238655.jpg","content":"<h2 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h2><p>Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行一条命令即可编译、运行一个完整 的漏洞靶场镜像。 </p>\n<p>Vulhub是一个基于 docker 和 docker-compose 的漏洞环境集合，进入对应目录并执行一条语句即可启 动一个全新的漏洞环境，让漏洞复现变得更加简单，让安全研究者更加专注于漏洞原理本身。</p>\n<h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><h3 id=\"安装dockers\"><a href=\"#安装dockers\" class=\"headerlink\" title=\"安装dockers\"></a>安装dockers</h3><pre class=\"line-numbers language-linux\" data-language=\"linux\"><code class=\"language-linux\">apt-get install curl\ncurl -s https:&#x2F;&#x2F;get.docker.com&#x2F; | sh</code></pre>\n\n\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153028733.png\" alt=\"image-20221124153028733\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153057735.png\" alt=\"image-20221124153057735\"></p>\n<h3 id=\"配置镜像加速器\"><a href=\"#配置镜像加速器\" class=\"headerlink\" title=\"配置镜像加速器\"></a>配置镜像加速器</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">mkdir -p &#x2F;etc&#x2F;docker</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tee &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123;\n&quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;kn5vuonk.mirror.aliyuncs.com&quot;]\n&#125;\nEOF</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo systemctl daemon-reload\nsudo systemctl restart docker</code></pre>\n\n\n\n<h3 id=\"安装pip\"><a href=\"#安装pip\" class=\"headerlink\" title=\"安装pip\"></a>安装pip</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">apt install python3-pip</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153237241.png\" alt=\"image-20221124153237241\"></p>\n<h3 id=\"安装docker-compose\"><a href=\"#安装docker-compose\" class=\"headerlink\" title=\"安装docker-compose\"></a>安装docker-compose</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">pip install docker-compose</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153318431.png\" alt=\"image-20221124153318431\"></p>\n<h3 id=\"安装git\"><a href=\"#安装git\" class=\"headerlink\" title=\"安装git\"></a>安装git</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">apt-get install git</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153352362.png\" alt=\"image-20221124153352362\"></p>\n<h3 id=\"将vulhub压缩包上传到服务器\"><a href=\"#将vulhub压缩包上传到服务器\" class=\"headerlink\" title=\"将vulhub压缩包上传到服务器\"></a>将vulhub压缩包上传到服务器</h3><p>这里我是直接将压缩包放到虚拟机里面解压的</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124154855869.png\" alt=\"image-20221124154855869\"></p>\n<h3 id=\"启动环境\"><a href=\"#启动环境\" class=\"headerlink\" title=\"启动环境\"></a>启动环境</h3><p>docker-compose会自动查找当前目录下的配置文件（默认文件名为 docker-compose.yml ），并根据 其内容编译镜像和启动容器。</p>\n<p> 所以，要运行某个漏洞靶场，需要先进入该漏洞所在的目录。 </p>\n<p>在vulhub中选择某个环境，进入对应的目录，如Flask服务端模板注入漏洞，进入flash目录</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155303873.png\" alt=\"image-20221124155303873\"></p>\n<p>我这里是进入tomcat目录</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155350073.png\" alt=\"image-20221124155350073\"></p>\n<p><strong>对漏洞靶场进行编译和运行</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker-compose build\n或者\ndocker-commpose up -d</code></pre>\n\n<p><strong>注意： docker-compose up -d 运行后，会自动查找当前目录下的配置文件。如果配置文件中包含的环 境均已经存在，则不会再次编译；如果配置文件中包含的环境不存在，则会自动进行编译。所以，其实 docker-compose up -d 命令是包含了 docker-compose build 的</strong></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155721429.png\" alt=\"image-20221124155721429\"></p>\n<h3 id=\"查看端口映射关系\"><a href=\"#查看端口映射关系\" class=\"headerlink\" title=\"查看端口映射关系\"></a>查看端口映射关系</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo docker-compose config</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155757535.png\" alt=\"image-20221124155757535\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo docker-compose ps</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124160008702.png\" alt=\"image-20221124160008702\"></p>\n<h3 id=\"连接漏洞\"><a href=\"#连接漏洞\" class=\"headerlink\" title=\"连接漏洞\"></a>连接漏洞</h3><p>查看了端口映射过后直接在浏览器输入ip地址加端口号就可访问漏洞了</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124161154280.png\" alt=\"image-20221124161154280\"></p>\n<h3 id=\"关闭环境\"><a href=\"#关闭环境\" class=\"headerlink\" title=\"关闭环境\"></a>关闭环境</h3><p><strong>在关闭及移除环境的时候，也需要在对应目录下，执行下列命令</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker-compose down</code></pre>\n\n<p>上述命令会执行如下几个动作：</p>\n<ul>\n<li>关闭正在运行的容器</li>\n<li>删除所有相关容器</li>\n<li>移除NAT（docker-compose在运行的时候会创建一个NAT网段）</li>\n</ul>\n<p>但不会移除编译好的漏洞镜像，下次再执行<code>docker-compose up -d</code>命令，就不需要再次编译相关镜像了。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124160104565.png\" alt=\"image-20221124160104565\"></p>\n<h2 id=\"PS\"><a href=\"#PS\" class=\"headerlink\" title=\"PS\"></a>PS</h2><p>在主机中连接虚拟机的漏洞环境可能会出现超时无法响应的现象，但是在虚拟机中能访问</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124165833125.png\" alt=\"image-20221124165833125\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124165904166.png\" alt=\"image-20221124165904166\"></p>\n<p>是因为虚拟机没关防火墙的原因</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"> ubuntu关闭和开启防火墙\n1.关闭ubuntu的防火墙：ufw disable\n\n2.开启防火墙：ufw enable\n\n3.卸载了iptables:apt-get remove iptables\n\n4.关闭ubuntu中的防火墙的其余命令:\n    iptables -P INPUT ACCEPT\n    iptables -P FORWARD ACCEPT\n    iptables -P OUTPUT ACCEPT\n    iptables -F</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124170007160.png\" alt=\"image-20221124170007160\"></p>\n<p>在虚拟机中关闭防火墙就好了</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124170042802.png\" alt=\"image-20221124170042802\"></p>\n","text":"概述Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行一条命令即可编译、运行一个完整 的漏洞靶场镜像。 Vulhub是一个基于 docker 和 docker-compose 的漏洞环境集合，进入对应目录并执行一条语句即可启 动一个全新的漏洞环境，让漏洞复现...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"环境配置","slug":"环境配置","count":4,"path":"api/categories/环境配置.json"}],"tags":[{"name":"vulhub","slug":"vulhub","count":2,"path":"api/tags/vulhub.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">概述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">安装环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85dockers\"><span class=\"toc-text\">安装dockers</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8\"><span class=\"toc-text\">配置镜像加速器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85pip\"><span class=\"toc-text\">安装pip</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85docker-compose\"><span class=\"toc-text\">安装docker-compose</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85git\"><span class=\"toc-text\">安装git</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%86vulhub%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">将vulhub压缩包上传到服务器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">启动环境</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">查看端口映射关系</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">连接漏洞</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">关闭环境</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#PS\"><span class=\"toc-text\">PS</span></a></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"php怎么通过url传参","uid":"7ed8089baf30886b0aa7735f2db515b2","slug":"php怎么通过url传参","date":"2023-01-10T13:21:22.708Z","updated":"2023-01-06T12:46:37.820Z","comments":true,"path":"api/articles/php怎么通过url传参.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typorawallhaven-y86g17_1280x720.png","text":"php怎么通过url传参​ 目前正在学php基础,遇到一个困扰我的问题,那就是通过使用_GET[]的方式获取url中所传的参数中?的用途,如下图: 123.php页面代码如图 为什么通过在127.0.0.1&#x2F;php.123后面输入?target&#x3D;import....","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":15,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"php","slug":"php","count":5,"path":"api/tags/php.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}},"next_post":{"title":"MYSQL在线笔记1","uid":"fb8cab7394f8a5dac8ef147ae6234738","slug":"MYSQL","date":"2023-01-10T13:21:22.691Z","updated":"2023-01-14T13:36:57.036Z","comments":true,"path":"api/articles/MYSQL.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typorawallhaven-3lo8q3_1920x1080.png","text":"mysql0.数据库常见概念0.1概念数据库： 英文单词DataBase，简称DB。按照一定格式存储数据的一些文件的组合。 顾名思义：存储数据的仓库，实际上就是一堆文件。这些文件中存储了 具有特定格式的数据。 数据库管理系统： DataBaseManagement，简称DBMS。...","link":"","photos":[],"count_time":{"symbolsCount":"35k","symbolsTime":"32 mins."},"categories":[{"name":"在线笔记","slug":"在线笔记","count":3,"path":"api/categories/在线笔记.json"}],"tags":[{"name":"数据库安全","slug":"数据库安全","count":3,"path":"api/tags/数据库安全.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}