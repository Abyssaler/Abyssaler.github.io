{"title":"vulhub靶场环境搭建","uid":"1fa64911bbe068fc2410b2322a01cf3e","slug":"vulhub靶场环境搭建","date":"2023-01-10T13:21:22.708Z","updated":"2023-07-18T12:44:23.991Z","comments":true,"path":"api/articles/vulhub靶场环境搭建.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora3f878fc75ad84405bffa29a309238655.jpg","content":"<h2 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h2><p>Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行一条命令即可编译、运行一个完整 的漏洞靶场镜像。 </p>\n<p>Vulhub是一个基于 docker 和 docker-compose 的漏洞环境集合，进入对应目录并执行一条语句即可启 动一个全新的漏洞环境，让漏洞复现变得更加简单，让安全研究者更加专注于漏洞原理本身。</p>\n<h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><h3 id=\"安装docker\"><a href=\"#安装docker\" class=\"headerlink\" title=\"安装docker\"></a>安装docker</h3><pre class=\"line-numbers language-linux\" data-language=\"linux\"><code class=\"language-linux\">apt-get install curl\ncurl -s https:&#x2F;&#x2F;get.docker.com&#x2F; | sh</code></pre>\n\n\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153028733.png\" alt=\"image-20221124153028733\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153057735.png\" alt=\"image-20221124153057735\"></p>\n<h3 id=\"配置镜像加速器\"><a href=\"#配置镜像加速器\" class=\"headerlink\" title=\"配置镜像加速器\"></a>配置镜像加速器</h3><p>阿里云镜像加速网站</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://cr.console.aliyun.com/cn-hangzhou/instances\">https://cr.console.aliyun.com/cn-hangzhou/instances</a></p></blockquote>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mkdir -p &#x2F;etc&#x2F;docker</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tee &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123;\n&quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;kn5vuonk.mirror.aliyuncs.com&quot;]\n&#125;\nEOF</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo systemctl daemon-reload\nsudo systemctl restart docker</code></pre>\n\n\n\n<h3 id=\"安装pip\"><a href=\"#安装pip\" class=\"headerlink\" title=\"安装pip\"></a>安装pip</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">apt install python3-pip</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153237241.png\" alt=\"image-20221124153237241\"></p>\n<h3 id=\"安装docker-compose\"><a href=\"#安装docker-compose\" class=\"headerlink\" title=\"安装docker-compose\"></a>安装docker-compose</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">pip install docker-compose</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153318431.png\" alt=\"image-20221124153318431\"></p>\n<h3 id=\"安装git\"><a href=\"#安装git\" class=\"headerlink\" title=\"安装git\"></a>安装git</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">apt-get install git</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124153352362.png\" alt=\"image-20221124153352362\"></p>\n<h3 id=\"将vulhub压缩包上传到服务器\"><a href=\"#将vulhub压缩包上传到服务器\" class=\"headerlink\" title=\"将vulhub压缩包上传到服务器\"></a>将vulhub压缩包上传到服务器</h3><p>项目地址</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://vulhub.org/#/index/\">https://vulhub.org/#/index/</a></p>\n<p><a href=\"https://github.com/vulhub/vulhub\">https://github.com/vulhub/vulhub</a></p></blockquote>\n<p>根据教程一步一步来就行啦</p>\n<p>这里我是直接将压缩包放到虚拟机里面解压的</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124154855869.png\" alt=\"image-20221124154855869\"></p>\n<h3 id=\"启动环境\"><a href=\"#启动环境\" class=\"headerlink\" title=\"启动环境\"></a>启动环境</h3><p>docker-compose会自动查找当前目录下的配置文件（默认文件名为 docker-compose.yml ），并根据 其内容编译镜像和启动容器。</p>\n<p> 所以，要运行某个漏洞靶场，需要先进入该漏洞所在的目录。 </p>\n<p>在vulhub中选择某个环境，进入对应的目录，如Flask服务端模板注入漏洞，进入flash目录</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155303873.png\" alt=\"image-20221124155303873\"></p>\n<p>我这里是进入tomcat目录</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155350073.png\" alt=\"image-20221124155350073\"></p>\n<p><strong>对漏洞靶场进行编译和运行</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker-commpose up -d</code></pre>\n\n<p><strong>注意： docker-compose up -d 运行后，会自动查找当前目录下的配置文件。如果配置文件中包含的环 境均已经存在，则不会再次编译；如果配置文件中包含的环境不存在，则会自动进行编译。所以，其实 docker-compose up -d 命令是包含了 docker-compose build 的</strong></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155721429.png\" alt=\"image-20221124155721429\"></p>\n<h3 id=\"查看端口映射关系\"><a href=\"#查看端口映射关系\" class=\"headerlink\" title=\"查看端口映射关系\"></a>查看端口映射关系</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo docker-compose config</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124155757535.png\" alt=\"image-20221124155757535\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo docker-compose ps</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124160008702.png\" alt=\"image-20221124160008702\"></p>\n<h3 id=\"连接漏洞\"><a href=\"#连接漏洞\" class=\"headerlink\" title=\"连接漏洞\"></a>连接漏洞</h3><p>查看了端口映射过后直接在浏览器输入ip地址加端口号就可访问漏洞了</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124161154280.png\" alt=\"image-20221124161154280\"></p>\n<h3 id=\"关闭环境\"><a href=\"#关闭环境\" class=\"headerlink\" title=\"关闭环境\"></a>关闭环境</h3><p><strong>在关闭及移除环境的时候，也需要在对应目录下，执行下列命令</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker-compose down</code></pre>\n\n<p>上述命令会执行如下几个动作：</p>\n<ul>\n<li>关闭正在运行的容器</li>\n<li>删除所有相关容器</li>\n<li>移除NAT（docker-compose在运行的时候会创建一个NAT网段）</li>\n</ul>\n<p>但不会移除编译好的漏洞镜像，下次再执行<code>docker-compose up -d</code>命令，就不需要再次编译相关镜像了。</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124160104565.png\" alt=\"image-20221124160104565\"></p>\n<h2 id=\"PS\"><a href=\"#PS\" class=\"headerlink\" title=\"PS\"></a>PS</h2><p>在主机中连接虚拟机的漏洞环境可能会出现超时无法响应的现象，但是在虚拟机中能访问</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124165833125.png\" alt=\"image-20221124165833125\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124165904166.png\" alt=\"image-20221124165904166\"></p>\n<p>是因为虚拟机没关防火墙的原因</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"> ubuntu关闭和开启防火墙\n1.关闭ubuntu的防火墙：ufw disable\n\n2.开启防火墙：ufw enable\n\n3.卸载了iptables:apt-get remove iptables\n\n4.关闭ubuntu中的防火墙的其余命令:\n    iptables -P INPUT ACCEPT\n    iptables -P FORWARD ACCEPT\n    iptables -P OUTPUT ACCEPT\n    iptables -F</code></pre>\n\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124170007160.png\" alt=\"image-20221124170007160\"></p>\n<p>在虚拟机中关闭防火墙就好了</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typoraimage-20221124170042802.png\" alt=\"image-20221124170042802\"></p>\n","text":"概述Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行一条命令即可编译、运行一个完整 的漏洞靶场镜像。 Vulhub是一个基于 docker 和 docker-compose 的漏洞环境集合，进入对应目录并执行一条语句即可启 动一个全新的漏洞环境，让漏洞复现...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"环境配置","slug":"环境配置","count":4,"path":"api/categories/环境配置.json"}],"tags":[{"name":"vulhub","slug":"vulhub","count":2,"path":"api/tags/vulhub.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">概述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">安装环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85docker\"><span class=\"toc-text\">安装docker</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8\"><span class=\"toc-text\">配置镜像加速器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85pip\"><span class=\"toc-text\">安装pip</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85docker-compose\"><span class=\"toc-text\">安装docker-compose</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85git\"><span class=\"toc-text\">安装git</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%86vulhub%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">将vulhub压缩包上传到服务器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">启动环境</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">查看端口映射关系</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">连接漏洞</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">关闭环境</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#PS\"><span class=\"toc-text\">PS</span></a></li></ol>","author":{"name":"caTt0m","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"nmap扫描基础","uid":"37e3720854a52996fd51ede25d9a35d3","slug":"Nmap扫描基础","date":"2023-01-10T13:21:22.708Z","updated":"2022-12-01T05:31:27.427Z","comments":true,"path":"api/articles/Nmap扫描基础.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typorawallhaven-mdmqpk_1920x1080.png","text":"声明：此篇文章是引用来方便自己学习的，原出处在这里 https://gitee.com/qianyongFeng/wiki/blob/master 名称nmap — 网络探测工具和安全&#x2F;端口扫描器 命令nmap [ &lt;扫描类型&gt; …] [ &lt;选项&gt...","link":"","photos":[],"count_time":{"symbolsCount":"49k","symbolsTime":"44 mins."},"categories":[{"name":"在线笔记","slug":"在线笔记","count":3,"path":"api/categories/在线笔记.json"}],"tags":[{"name":"工具","slug":"工具","count":3,"path":"api/tags/工具.json"}],"author":{"name":"caTt0m","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}},"next_post":{"title":"php弱类型比较以及绕过","uid":"ce536701181d097db34a6f82f02496a3","slug":"php弱类型比较及绕过","date":"2023-01-10T13:21:22.708Z","updated":"2022-11-20T05:14:15.887Z","comments":true,"path":"api/articles/php弱类型比较及绕过.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora0432a40b6ab749f8ae473d5c7e9ce12a.jpg","text":"PHP中的弱类型比较php是一种弱类型语言，对数据的类型要求并不严格，可以让数据类型互相转换 0.强类型与弱类型强类型 •所谓强类型(Strongly typed)，顾名思义就是强制数据类型定义的语言。也就是说，一旦一个变量被指定了某个数据类型，如果不经过强制转换，那么它就永远是...","link":"","photos":[],"count_time":{"symbolsCount":"9.4k","symbolsTime":"9 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":13,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"php","slug":"php","count":5,"path":"api/tags/php.json"}],"author":{"name":"caTt0m","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}