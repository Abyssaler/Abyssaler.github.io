{"title":"数据库安全加固-klsday14","uid":"6925a99db31210bce02d4fee6626041a","slug":"klsday14-安全加固","date":"2023-06-02T00:24:58.986Z","updated":"2023-06-09T00:31:56.234Z","comments":true,"path":"api/articles/klsday14-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-d68o6o.jpg","content":"<h2 id=\"MySQL安全加固\"><a href=\"#MySQL安全加固\" class=\"headerlink\" title=\"MySQL安全加固\"></a>MySQL安全加固</h2><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605090539714.png\" alt=\"image-20230605090539714\"></p>\n<p><code>yum -y install mariadb mariadb-server</code></p>\n<p><code>systemctl start mariadb.service</code></p>\n<p><code>mysql -u root -p</code>  # 默认空密码</p>\n<p><code>use mysql</code></p>\n<p><code>update user set password=password(&#39;123456&#39;) where user=&#39;root&#39;;</code></p>\n<p><code>flush privileges;</code></p>\n<h3 id=\"修改DBA登陆密码\"><a href=\"#修改DBA登陆密码\" class=\"headerlink\" title=\"修改DBA登陆密码\"></a>修改DBA登陆密码</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605091854243.png\" alt=\"image-20230605091854243\"></p>\n<h3 id=\"删除默认数据库和用户\"><a href=\"#删除默认数据库和用户\" class=\"headerlink\" title=\"删除默认数据库和用户\"></a>删除默认数据库和用户</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605091919749.png\" alt=\"image-20230605091919749\"></p>\n<h3 id=\"变更DBA用户名\"><a href=\"#变更DBA用户名\" class=\"headerlink\" title=\"变更DBA用户名\"></a>变更DBA用户名</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605092258978.png\" alt=\"image-20230605092258978\"></p>\n<h3 id=\"添加账户时，对密码加密\"><a href=\"#添加账户时，对密码加密\" class=\"headerlink\" title=\"添加账户时，对密码加密\"></a>添加账户时，对密码加密</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605093003080.png\" alt=\"image-20230605093003080\"></p>\n<h3 id=\"更改mysql启动用户\"><a href=\"#更改mysql启动用户\" class=\"headerlink\" title=\"更改mysql启动用户\"></a>更改mysql启动用户</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605093007379.png\" alt=\"image-20230605093007379\"></p>\n<h3 id=\"限制远程连接数\"><a href=\"#限制远程连接数\" class=\"headerlink\" title=\"限制远程连接数\"></a>限制远程连接数</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605093155044.png\" alt=\"image-20230605093155044\"></p>\n<h3 id=\"关闭远程管理数据库\"><a href=\"#关闭远程管理数据库\" class=\"headerlink\" title=\"关闭远程管理数据库\"></a>关闭远程管理数据库</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605093351659.png\" alt=\"image-20230605093351659\"></p>\n<h3 id=\"清理MySQL命令历史\"><a href=\"#清理MySQL命令历史\" class=\"headerlink\" title=\"清理MySQL命令历史\"></a>清理MySQL命令历史</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605093837172.png\" alt=\"image-20230605093837172\"></p>\n<h3 id=\"禁止MySQL读取本地文件\"><a href=\"#禁止MySQL读取本地文件\" class=\"headerlink\" title=\"禁止MySQL读取本地文件\"></a>禁止MySQL读取本地文件</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605094211040.png\" alt=\"image-20230605094211040\"></p>\n<h3 id=\"禁止将表导出到文件\"><a href=\"#禁止将表导出到文件\" class=\"headerlink\" title=\"禁止将表导出到文件\"></a>禁止将表导出到文件</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605095927193.png\" alt=\"image-20230605095927193\"></p>\n<h3 id=\"日常备份数据库\"><a href=\"#日常备份数据库\" class=\"headerlink\" title=\"日常备份数据库\"></a>日常备份数据库</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605100725955.png\" alt=\"image-20230605100725955\"></p>\n<p><code>vim /etc/my.cnf</code></p>\n<p>在[mysqsld]中加上<code>log-bin=mysql-bin</code></p>\n<p><code>mysqldump -p123456 --user=root --all-databases --flush-privileges --lock-all-tables --master-data=1 --flush-logs --triggers --routines --events --hex-blob &gt; /root/20230605.sql</code></p>\n<h2 id=\"redis安全加固\"><a href=\"#redis安全加固\" class=\"headerlink\" title=\"redis安全加固\"></a>redis安全加固</h2><p><code>tar fx redis-5.0.7.tar.gz</code></p>\n<p><code>cp -r redis-5.0.7 /usr/local/redis</code></p>\n<p><code>cd /usr/local/redis/</code></p>\n<p><code>make -j2 &amp;&amp; make install</code></p>\n<p><code>cd src</code></p>\n<p><code>./redis-server &amp;</code></p>\n<h3 id=\"禁止网络访问redis服务\"><a href=\"#禁止网络访问redis服务\" class=\"headerlink\" title=\"禁止网络访问redis服务\"></a>禁止网络访问redis服务</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605103432046.png\" alt=\"image-20230605103432046\"></p>\n<h3 id=\"设置防火墙过滤流量\"><a href=\"#设置防火墙过滤流量\" class=\"headerlink\" title=\"设置防火墙过滤流量\"></a>设置防火墙过滤流量</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605103608644.png\" alt=\"image-20230605103608644\"></p>\n<h3 id=\"禁用高危命令\"><a href=\"#禁用高危命令\" class=\"headerlink\" title=\"禁用高危命令\"></a>禁用高危命令</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605103649798.png\" alt=\"image-20230605103649798\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605104426860.png\" alt=\"image-20230605104426860\"></p>\n<p><code>./redis-server /usr/local/redis/redis.conf &amp;</code></p>\n<p><code>[root@centos7kls-aby src]# ./redis-cli shutdown (error) ERR unknown command </code>shutdown<code>, with args beginning with: </code></p>\n<p><code>./redis-cli aaa</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605112014430.png\" alt=\"image-20230605112014430\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605105040841.png\" alt=\"image-20230605105040841\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605105128740.png\" alt=\"image-20230605105128740\"></p>\n<h3 id=\"使用最小权限用户运行主程序\"><a href=\"#使用最小权限用户运行主程序\" class=\"headerlink\" title=\"使用最小权限用户运行主程序\"></a>使用最小权限用户运行主程序</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605105312661.png\" alt=\"image-20230605105312661\"></p>\n<p>可以加上配置文件</p>\n<p><code>su -m redis -c /usr/local/redis/src/redis-server /usr/local/redis/redis.conf &amp;</code></p>\n<h3 id=\"备份和恢复数据\"><a href=\"#备份和恢复数据\" class=\"headerlink\" title=\"备份和恢复数据\"></a>备份和恢复数据</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605110931343.png\" alt=\"image-20230605110931343\"></p>\n<h2 id=\"mongodb安全加固\"><a href=\"#mongodb安全加固\" class=\"headerlink\" title=\"mongodb安全加固\"></a>mongodb安全加固</h2><p><code>tar fx mongodb-linux-x86_64-rhel70-4.2.3.tgz</code></p>\n<p><code>mv mongodb-linux-x86_64-rhel70-4.2.3 /usr/local/mongodb</code></p>\n<p><code>cd /usr/local/mongodb</code></p>\n<p><code>mkdir -p data/db logs etc</code></p>\n<p><code>cd etc</code></p>\n<p><code>vim mongdb.conf</code></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">dbpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;data&#x2F;db\nlogpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;logs&#x2F;mongodb.log\nfork&#x3D;true\njournal&#x3D;false</code></pre>\n\n<p><code>cd ..</code></p>\n<p><code>./bin/mongod --config /usr/local/mongodb/etc/mongdb.conf </code></p>\n<p><code>lsof -i:27017</code></p>\n<p><code> ./bin/mongo</code>   # 可以指定端口</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605134325666.png\" alt=\"image-20230605134325666\"></p>\n<p><code>./bin/mongod --shutdown -f /usr/local/mongodb/etc/mongdb.conf</code>    # 关闭mongodb</p>\n<h3 id=\"指定日志与数据库存放位置\"><a href=\"#指定日志与数据库存放位置\" class=\"headerlink\" title=\"指定日志与数据库存放位置\"></a>指定日志与数据库存放位置</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605134635508.png\" alt=\"image-20230605134635508\"></p>\n<h3 id=\"更改默认端口\"><a href=\"#更改默认端口\" class=\"headerlink\" title=\"更改默认端口\"></a>更改默认端口</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605134645987.png\" alt=\"image-20230605134645987\"></p>\n<h3 id=\"只监听业务流网卡\"><a href=\"#只监听业务流网卡\" class=\"headerlink\" title=\"只监听业务流网卡\"></a>只监听业务流网卡</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605134835090.png\" alt=\"image-20230605134835090\"></p>\n<h3 id=\"开启认证功能\"><a href=\"#开启认证功能\" class=\"headerlink\" title=\"开启认证功能\"></a>开启认证功能</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605134949667.png\" alt=\"image-20230605134949667\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605135212260.png\" alt=\"image-20230605135212260\"></p>\n<p><code>./bin/mongod --shutdown -f /usr/local/mongodb/etc/mongdb.conf</code></p>\n<p><code>vim /usr/local/mongodb/etc/mongdb.conf</code></p>\n<p><code>./bin/mongod --config /usr/local/mongodb/etc/mongdb.conf</code></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605135747223.png\" alt=\"image-20230605135747223\"></p>\n<h3 id=\"备份与恢复\"><a href=\"#备份与恢复\" class=\"headerlink\" title=\"备份与恢复\"></a>备份与恢复</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605140533896.png\" alt=\"image-20230605140533896\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605141100159.png\" alt=\"image-20230605141100159\"></p>\n<p>应该是<code>bin/mongodump --host 192.168.2.153 --port 27017 -d admin -o /tmp/ -u bkuser -p 123.com --authenticationDatabase admin</code></p>\n<h2 id=\"SQL-server安全加固\"><a href=\"#SQL-server安全加固\" class=\"headerlink\" title=\"SQL server安全加固\"></a>SQL server安全加固</h2><h3 id=\"SQL-server安装\"><a href=\"#SQL-server安装\" class=\"headerlink\" title=\"SQL server安装\"></a>SQL server安装</h3><p>先在虚拟机上挂载光盘</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605152742888.png\" alt=\"image-20230605152742888\"></p>\n<p>开始安装</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605152758232.png\" alt=\"image-20230605152758232\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605152834546.png\" alt=\"image-20230605152834546\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605152936799.png\" alt=\"image-20230605152936799\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153056474.png\" alt=\"image-20230605153056474\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153114368.png\" alt=\"image-20230605153114368\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153140381.png\" alt=\"image-20230605153140381\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153231988.png\" alt=\"image-20230605153231988\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153430170.png\" alt=\"image-20230605153430170\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153503087.png\" alt=\"image-20230605153503087\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153534555.png\" alt=\"image-20230605153534555\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153556910.png\" alt=\"image-20230605153556910\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153628707.png\" alt=\"image-20230605153628707\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153644166.png\" alt=\"image-20230605153644166\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153659022.png\" alt=\"image-20230605153659022\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153737704.png\" alt=\"image-20230605153737704\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153759096.png\" alt=\"image-20230605153759096\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145318409.png\" alt=\"image-20230605145318409\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145430227.png\" alt=\"image-20230605145430227\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145438547.png\" alt=\"image-20230605145438547\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145459642.png\" alt=\"image-20230605145459642\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145609276.png\" alt=\"image-20230605145609276\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145619822.png\" alt=\"image-20230605145619822\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145636833.png\" alt=\"image-20230605145636833\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605145654043.png\" alt=\"image-20230605145654043\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153242251.png\" alt=\"image-20230605153242251\"></p>\n<p>重启</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605153934500.png\" alt=\"image-20230605153934500\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154004463.png\" alt=\"image-20230605154004463\"></p>\n<h3 id=\"修改管理员登录信息\"><a href=\"#修改管理员登录信息\" class=\"headerlink\" title=\"修改管理员登录信息\"></a>修改管理员登录信息</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154121344.png\" alt=\"image-20230605154121344\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154203471.png\" alt=\"image-20230605154203471\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154228732.png\" alt=\"image-20230605154228732\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154249441.png\" alt=\"image-20230605154249441\"></p>\n<h3 id=\"操作权限最小化\"><a href=\"#操作权限最小化\" class=\"headerlink\" title=\"操作权限最小化\"></a>操作权限最小化</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154325374.png\" alt=\"image-20230605154325374\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154347888.png\" alt=\"image-20230605154347888\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154524472.png\" alt=\"image-20230605154524472\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154442450.png\" alt=\"image-20230605154442450\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154504754.png\" alt=\"image-20230605154504754\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154630016.png\" alt=\"image-20230605154630016\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154551615.png\" alt=\"image-20230605154551615\"></p>\n<h3 id=\"禁用系统管理员登陆数据库\"><a href=\"#禁用系统管理员登陆数据库\" class=\"headerlink\" title=\"禁用系统管理员登陆数据库\"></a>禁用系统管理员登陆数据库</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154727116.png\" alt=\"image-20230605154727116\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154758780.png\" alt=\"image-20230605154758780\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154812188.png\" alt=\"image-20230605154812188\"></p>\n<h3 id=\"对数据库启用更改跟踪\"><a href=\"#对数据库启用更改跟踪\" class=\"headerlink\" title=\"对数据库启用更改跟踪\"></a>对数据库启用更改跟踪</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154838187.png\" alt=\"image-20230605154838187\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605154934660.png\" alt=\"image-20230605154934660\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155037192.png\" alt=\"image-20230605155037192\"></p>\n<h3 id=\"事务日志远程备份\"><a href=\"#事务日志远程备份\" class=\"headerlink\" title=\"事务日志远程备份\"></a>事务日志远程备份</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155109442.png\" alt=\"image-20230605155109442\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155404962.png\" alt=\"image-20230605155404962\"></p>\n<h3 id=\"更改登陆审核日志\"><a href=\"#更改登陆审核日志\" class=\"headerlink\" title=\"更改登陆审核日志\"></a>更改登陆审核日志</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155454400.png\" alt=\"image-20230605155454400\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155445416.png\" alt=\"image-20230605155445416\"></p>\n<h3 id=\"禁止远程登陆数据库\"><a href=\"#禁止远程登陆数据库\" class=\"headerlink\" title=\"禁止远程登陆数据库\"></a>禁止远程登陆数据库</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155517448.png\" alt=\"image-20230605155517448\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155548840.png\" alt=\"image-20230605155548840\"></p>\n<h3 id=\"删除有风险的存储过程\"><a href=\"#删除有风险的存储过程\" class=\"headerlink\" title=\"删除有风险的存储过程\"></a>删除有风险的存储过程</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155638802.png\" alt=\"image-20230605155638802\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155732369.png\" alt=\"image-20230605155732369\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155744885.png\" alt=\"image-20230605155744885\"></p>\n<h3 id=\"修改网卡监听地址\"><a href=\"#修改网卡监听地址\" class=\"headerlink\" title=\"修改网卡监听地址\"></a>修改网卡监听地址</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155850714.png\" alt=\"image-20230605155850714\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155829013.png\" alt=\"image-20230605155829013\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155845638.png\" alt=\"image-20230605155845638\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155926545.png\" alt=\"image-20230605155926545\"></p>\n<h3 id=\"创建最小权限启动服务的账户\"><a href=\"#创建最小权限启动服务的账户\" class=\"headerlink\" title=\"创建最小权限启动服务的账户\"></a>创建最小权限启动服务的账户</h3><p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605155948926.png\" alt=\"image-20230605155948926\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605161022468.png\" alt=\"image-20230605161022468\"></p>\n<p>要先创建个用户</p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605160135026.png\" alt=\"image-20230605160135026\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605160154490.png\" alt=\"image-20230605160154490\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605161131577.png\" alt=\"image-20230605161131577\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605161204180.png\" alt=\"image-20230605161204180\"></p>\n<p><img src=\"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/image-20230605161221004.png\" alt=\"image-20230605161221004\"></p>\n","feature":true,"text":"MySQL安全加固 yum -y install mariadb mariadb-server systemctl start mariadb.service mysql -u root -p # 默认空密码 use mysql update user set password=...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#MySQL%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">MySQL安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9DBA%E7%99%BB%E9%99%86%E5%AF%86%E7%A0%81\"><span class=\"toc-text\">修改DBA登陆密码</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%94%A8%E6%88%B7\"><span class=\"toc-text\">删除默认数据库和用户</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%98%E6%9B%B4DBA%E7%94%A8%E6%88%B7%E5%90%8D\"><span class=\"toc-text\">变更DBA用户名</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E8%B4%A6%E6%88%B7%E6%97%B6%EF%BC%8C%E5%AF%B9%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86\"><span class=\"toc-text\">添加账户时，对密码加密</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9mysql%E5%90%AF%E5%8A%A8%E7%94%A8%E6%88%B7\"><span class=\"toc-text\">更改mysql启动用户</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%90%E5%88%B6%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%95%B0\"><span class=\"toc-text\">限制远程连接数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">关闭远程管理数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B8%85%E7%90%86MySQL%E5%91%BD%E4%BB%A4%E5%8E%86%E5%8F%B2\"><span class=\"toc-text\">清理MySQL命令历史</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2MySQL%E8%AF%BB%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">禁止MySQL读取本地文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E5%B0%86%E8%A1%A8%E5%AF%BC%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">禁止将表导出到文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%B8%B8%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">日常备份数据库</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#redis%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">redis安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AEredis%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">禁止网络访问redis服务</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E8%BF%87%E6%BB%A4%E6%B5%81%E9%87%8F\"><span class=\"toc-text\">设置防火墙过滤流量</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E7%94%A8%E9%AB%98%E5%8D%B1%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">禁用高危命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E6%9C%80%E5%B0%8F%E6%9D%83%E9%99%90%E7%94%A8%E6%88%B7%E8%BF%90%E8%A1%8C%E4%B8%BB%E7%A8%8B%E5%BA%8F\"><span class=\"toc-text\">使用最小权限用户运行主程序</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">备份和恢复数据</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#mongodb%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">mongodb安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE\"><span class=\"toc-text\">指定日志与数据库存放位置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">更改默认端口</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%AA%E7%9B%91%E5%90%AC%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%BD%91%E5%8D%A1\"><span class=\"toc-text\">只监听业务流网卡</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AF%E8%AE%A4%E8%AF%81%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">开启认证功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D\"><span class=\"toc-text\">备份与恢复</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SQL-server%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA\"><span class=\"toc-text\">SQL server安全加固</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SQL-server%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">SQL server安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">修改管理员登录信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C%E6%9D%83%E9%99%90%E6%9C%80%E5%B0%8F%E5%8C%96\"><span class=\"toc-text\">操作权限最小化</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E9%99%86%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">禁用系统管理员登陆数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E7%94%A8%E6%9B%B4%E6%94%B9%E8%B7%9F%E8%B8%AA\"><span class=\"toc-text\">对数据库启用更改跟踪</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97%E8%BF%9C%E7%A8%8B%E5%A4%87%E4%BB%BD\"><span class=\"toc-text\">事务日志远程备份</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9%E7%99%BB%E9%99%86%E5%AE%A1%E6%A0%B8%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">更改登陆审核日志</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A6%81%E6%AD%A2%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">禁止远程登陆数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%9C%89%E9%A3%8E%E9%99%A9%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">删除有风险的存储过程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E7%9B%91%E5%90%AC%E5%9C%B0%E5%9D%80\"><span class=\"toc-text\">修改网卡监听地址</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%9C%80%E5%B0%8F%E6%9D%83%E9%99%90%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%B4%A6%E6%88%B7\"><span class=\"toc-text\">创建最小权限启动服务的账户</span></a></li></ol></li></ol>","author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"docker进阶-klsday15","uid":"2cea8a27d32f58a50ca371984b6b8f54","slug":"klsday15-docker进阶","date":"2023-06-06T00:50:35.191Z","updated":"2023-06-10T05:04:34.196Z","comments":true,"path":"api/articles/klsday15-docker进阶.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-7ppv3o.jpg","text":"Docker 是基于 Go 语言实现的云开源项目，是基于 Linux 的多项开源技术提供高效、敏捷和轻量级的容器方案。创建于 2013 年初，自从开源后就受到了广泛的关注，从长远的眼光来看，Docker 是未来虚拟化的一个发展的趋势。带来了更轻量快捷的的体验，一台主机可以同时运行...","link":"","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"12 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"中间件安全加固-klsday13","uid":"db9463cf6383f38bcf017a791d25f3b7","slug":"klsday13-安全加固","date":"2023-06-01T02:44:52.359Z","updated":"2023-06-02T11:50:55.389Z","comments":true,"path":"api/articles/klsday13-安全加固.json","keywords":null,"cover":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/wallhaven-1p398w.jpg","text":" apache安全加固 账号设置 授权设置 日志设置 %a: 远程IP地址 %A: 本地IP地址 %B: 已发送的字节数，不包含HTTP头 %b: CLF格式的已发送字节数量，不包含HTTP头。例如当没有发送数据时，写入‘-’而不是0。 %&#123;FOOBAR&#125;e:...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":28,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"kls","slug":"kls","count":15,"path":"api/tags/kls.json"}],"author":{"name":"Abyssaler","slug":"blog-author","avatar":"https://abyssaler-typora-photobank.oss-cn-chengdu.aliyuncs.com/img_for_typora/Face.jpg","link":"/","description":"道阻且长，行则将至","socials":{"github":"https://github.com/Abyssaler","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_45349299","juejin":"","customs":{}}}}}